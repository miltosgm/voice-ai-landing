<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sofia Dialer â€” Growth-onomics</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #f5f5fa;
    --surface: #ffffff;
    --border: rgba(0,0,0,0.07);
    --accent: #6c47ff;
    --accent2: #9b7fff;
    --green: #059669;
    --green-dim: rgba(5,150,105,0.1);
    --red: #e17055;
    --red-dim: rgba(225,112,85,0.1);
    --yellow: #d97706;
    --yellow-dim: rgba(217,119,6,0.1);
    --white: #1a1a2e;
    --gray: #6b7280;
    --gray2: #d1d5db;
  }

  body {
    font-family: 'Inter', sans-serif;
    background: var(--bg);
    color: var(--white);
    min-height: 100vh;
    padding: 32px 20px 80px;
  }
  body::before { display: none; }

  .page { position: relative; z-index: 1; max-width: 680px; margin: 0 auto; }

  /* HEADER */
  .header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 40px; }
  .brand { font-size: 12px; font-weight: 600; letter-spacing: 2px; text-transform: uppercase; color: var(--gray); }
  .brand span { color: var(--accent2); }
  .badge {
    font-size: 11px; font-weight: 600; padding: 4px 12px; border-radius: 20px;
    background: var(--green-dim); color: var(--green); border: 1px solid rgba(0,184,148,0.2);
    display: flex; align-items: center; gap: 6px;
  }
  .badge::before { content: ''; width: 6px; height: 6px; border-radius: 50%; background: var(--green); animation: blink 2s infinite; }
  @keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.3} }

  /* HERO */
  .hero {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 20px; padding: 28px 24px;
    display: flex; align-items: center; gap: 20px; margin-bottom: 20px;
  }
  .sofia-avatar-sm {
    width: 72px; height: 72px; border-radius: 50%;
    background: linear-gradient(135deg, #3d3580, #6c5ce7, #a29bfe);
    display: flex; align-items: center; justify-content: center; font-size: 32px;
    flex-shrink: 0; box-shadow: 0 0 32px rgba(108,92,231,0.3);
  }
  .sofia-info { flex: 1; }
  .sofia-name { font-size: 20px; font-weight: 700; margin-bottom: 4px; }
  .sofia-title { font-size: 13px; color: var(--gray); margin-bottom: 10px; }
  .sofia-title span { color: var(--accent2); }
  .sofia-tags { display: flex; flex-wrap: wrap; gap: 6px; }
  .tag { font-size: 11px; font-weight: 500; padding: 3px 10px; border-radius: 20px; background: rgba(108,92,231,0.12); color: var(--accent2); border: 1px solid rgba(108,92,231,0.2); }

  /* AGENT SELECTOR */
  .agent-selector { display: flex; gap: 10px; margin-bottom: 20px; }
  .agent-card {
    flex: 1; padding: 14px 16px;
    background: rgba(255,255,255,0.03); border: 1px solid var(--border);
    border-radius: 14px; cursor: pointer; transition: all 0.2s; text-align: left;
  }
  .agent-card:hover { border-color: var(--accent); }
  .agent-card.editing {
    border-color: var(--accent);
    background: rgba(108,92,231,0.12);
    cursor: text;
  }
  .agent-card-name[contenteditable],
  .agent-card-desc[contenteditable] {
    outline: none;
    border-radius: 4px;
    padding: 2px 4px;
    background: rgba(255,255,255,0.05);
    cursor: text;
  }
  .agent-card-name[contenteditable]:focus,
  .agent-card-desc[contenteditable]:focus {
    background: rgba(108,92,231,0.2);
    border: 1px solid var(--accent);
  }
  .edit-controls {
    display: none;
    gap: 6px;
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid var(--border);
  }
  .agent-card.editing .edit-controls {
    display: flex;
  }
  .btn-edit-save, .btn-edit-cancel {
    flex: 1;
    padding: 6px 10px;
    border: 1px solid var(--border);
    border-radius: 6px;
    background: rgba(255,255,255,0.04);
    color: var(--gray);
    font-family: 'Inter', sans-serif;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
  }
  .btn-edit-save:hover {
    border-color: var(--green);
    color: var(--green);
    background: rgba(0,184,148,0.1);
  }
  .btn-edit-cancel:hover {
    border-color: var(--red);
    color: var(--red);
    background: rgba(225,112,85,0.1);
  }
  .agent-card.active {
    border-color: var(--accent);
    background: rgba(108,92,231,0.08);
    box-shadow: 0 0 0 1px rgba(108,92,231,0.3);
  }
  .agent-card-header { display: flex; align-items: center; gap: 10px; margin-bottom: 6px; }
  .agent-emoji { font-size: 22px; }
  .agent-card-name { font-size: 14px; font-weight: 700; color: var(--white); }
  .agent-card-desc { font-size: 11px; color: var(--gray); line-height: 1.5; }
  .agent-card.active .agent-card-name { color: var(--accent2); }
  .agent-active-dot {
    width: 7px; height: 7px; border-radius: 50%;
    background: var(--accent2); margin-left: auto; flex-shrink: 0;
    opacity: 0;
  }
  .agent-card.active .agent-active-dot { opacity: 1; }

  /* MODE TABS */
  .mode-tabs {
    display: flex; gap: 0;
    background: rgba(255,255,255,0.03); border: 1px solid var(--border);
    border-radius: 14px; padding: 4px; margin-bottom: 20px;
  }
  .mode-tab {
    flex: 1; padding: 12px 16px; border: none; border-radius: 10px;
    background: transparent; color: var(--gray);
    font-family: 'Inter', sans-serif; font-size: 14px; font-weight: 600;
    cursor: pointer; transition: all 0.2s;
    display: flex; align-items: center; justify-content: center; gap: 8px;
  }
  .mode-tab.active { background: linear-gradient(135deg, var(--accent), var(--accent2)); color: white; box-shadow: 0 4px 16px rgba(108,92,231,0.35); }
  .mode-tab:not(.active):hover { color: var(--accent2); }

  /* LANGUAGE TOGGLE */
  .lang-toggle {
    display: flex; gap: 0;
    background: rgba(255,255,255,0.04); border: 1px solid var(--border);
    border-radius: 12px; padding: 4px; margin-bottom: 20px;
  }
  .lang-btn {
    flex: 1; padding: 10px 16px; border: none; border-radius: 8px;
    background: transparent; color: var(--gray);
    font-family: 'Inter', sans-serif; font-size: 13px; font-weight: 600;
    cursor: pointer; transition: all 0.2s;
    display: flex; align-items: center; justify-content: center; gap: 8px;
  }
  .lang-btn.active { background: linear-gradient(135deg, var(--accent), var(--accent2)); color: white; box-shadow: 0 4px 12px rgba(108,92,231,0.3); }
  .lang-btn:not(.active):hover { color: var(--accent2); }

  /* â”€â”€ BROWSER CALL SECTION â”€â”€ */
  .browser-section { display: none; }
  .browser-section.active { display: block; }

  .browser-card {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 20px; padding: 40px 24px 32px;
    display: flex; flex-direction: column; align-items: center;
    margin-bottom: 20px; text-align: center;
  }

  .avatar-wrap { position: relative; margin-bottom: 28px; }
  .avatar-lg {
    width: 110px; height: 110px; border-radius: 50%;
    background: linear-gradient(135deg, #3d3580, #6c5ce7, #a29bfe);
    display: flex; align-items: center; justify-content: center; font-size: 48px;
    position: relative; z-index: 2;
    box-shadow: 0 0 0 8px rgba(108,92,231,0.08), 0 0 60px rgba(108,92,231,0.25);
    transition: box-shadow 0.4s;
  }
  .avatar-lg.speaking {
    box-shadow: 0 0 0 8px rgba(108,92,231,0.15), 0 0 80px rgba(108,92,231,0.5);
    animation: pulse-glow 1.5s ease-in-out infinite;
  }
  @keyframes pulse-glow {
    0%,100% { box-shadow: 0 0 0 8px rgba(108,92,231,0.15), 0 0 60px rgba(108,92,231,0.3); }
    50% { box-shadow: 0 0 0 16px rgba(108,92,231,0.08), 0 0 100px rgba(108,92,231,0.5); }
  }
  .online-dot {
    position: absolute; bottom: 6px; right: 6px;
    width: 18px; height: 18px; border-radius: 50%;
    background: var(--green); border: 3px solid var(--bg); z-index: 3;
  }
  .online-dot.busy { background: var(--accent2); animation: blink 1s infinite; }
  .online-dot.ended { background: var(--gray); }

  .wave-wrap { height: 40px; display: flex; align-items: center; justify-content: center; gap: 5px; margin: 0 0 20px; opacity: 0; transition: opacity 0.4s; }
  .wave-wrap.visible { opacity: 1; }
  .wave-bar { width: 4px; border-radius: 2px; background: linear-gradient(to top, var(--accent), var(--accent2)); animation: wave 1.2s ease-in-out infinite; }
  .wave-bar:nth-child(1) { height: 10px; animation-delay: 0s; }
  .wave-bar:nth-child(2) { height: 20px; animation-delay: 0.1s; }
  .wave-bar:nth-child(3) { height: 34px; animation-delay: 0.2s; }
  .wave-bar:nth-child(4) { height: 24px; animation-delay: 0.15s; }
  .wave-bar:nth-child(5) { height: 34px; animation-delay: 0.25s; }
  .wave-bar:nth-child(6) { height: 20px; animation-delay: 0.1s; }
  .wave-bar:nth-child(7) { height: 10px; animation-delay: 0.05s; }
  .wave-bar.idle { animation: none; height: 4px !important; opacity: 0.3; }
  @keyframes wave { 0%,100% { transform: scaleY(0.3); opacity: 0.5; } 50% { transform: scaleY(1); opacity: 1; } }

  .call-timer { font-size: 15px; font-weight: 300; letter-spacing: 3px; color: var(--white); margin-bottom: 8px; font-variant-numeric: tabular-nums; opacity: 0; transition: opacity 0.3s; }
  .call-timer.visible { opacity: 1; }
  .call-status { font-size: 14px; color: var(--gray); margin-bottom: 28px; transition: color 0.3s; }
  .call-status.active { color: var(--accent2); }

  .btn-talk {
    width: 100%; max-width: 340px; padding: 18px;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    border: none; border-radius: 16px; color: white;
    font-family: 'Inter', sans-serif; font-size: 16px; font-weight: 600;
    cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px;
    transition: all 0.2s; box-shadow: 0 8px 32px rgba(108,92,231,0.3); margin-bottom: 12px;
  }
  .btn-talk:hover { transform: translateY(-2px); box-shadow: 0 12px 40px rgba(108,92,231,0.45); }
  .btn-talk:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

  .btn-end-call {
    width: 100%; max-width: 340px; padding: 15px;
    background: var(--red-dim); border: 1px solid rgba(225,112,85,0.3);
    border-radius: 16px; color: var(--red);
    font-family: 'Inter', sans-serif; font-size: 15px; font-weight: 600;
    cursor: pointer; display: none; align-items: center; justify-content: center; gap: 8px;
    transition: all 0.2s; margin-bottom: 12px;
  }
  .btn-end-call:hover { background: rgba(225,112,85,0.2); }
  .btn-end-call.show { display: flex; }

  /* â”€â”€ PHONE SECTION â”€â”€ */
  .phone-section { display: none; }
  .phone-section.active { display: block; }

  /* OPENER PREVIEW */
  .opener-preview {
    background: rgba(108,92,231,0.06); border: 1px solid rgba(108,92,231,0.15);
    border-left: 3px solid var(--accent); border-radius: 12px;
    padding: 14px 16px; margin-bottom: 20px;
    font-size: 13px; color: rgba(240,240,255,0.65); font-style: italic; line-height: 1.6;
  }
  .opener-label { font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 1.2px; color: var(--gray); margin-bottom: 6px; }

  /* CUSTOMIZE */
  .customize-toggle {
    width: 100%; background: var(--surface); border: 1px solid var(--border);
    border-radius: 16px; padding: 16px 20px; color: var(--gray);
    font-family: 'Inter', sans-serif; font-size: 14px; font-weight: 500;
    cursor: pointer; display: flex; align-items: center; justify-content: space-between;
    margin-bottom: 0; transition: all 0.2s; text-align: left;
  }
  .customize-toggle:hover { border-color: var(--accent); color: var(--accent2); }
  .customize-toggle.open { border-radius: 16px 16px 0 0; border-color: var(--accent); color: var(--accent2); }
  .toggle-left { display: flex; align-items: center; gap: 10px; }
  .toggle-arrow { font-size: 12px; transition: transform 0.25s; }
  .toggle-arrow.open { transform: rotate(180deg); }
  .modified-badge { font-size: 10px; font-weight: 600; padding: 2px 8px; border-radius: 20px; background: rgba(253,203,110,0.12); color: var(--yellow); border: 1px solid rgba(253,203,110,0.2); display: none; }
  .modified-badge.show { display: inline-block; }

  .customize-body {
    background: var(--surface); border: 1px solid var(--accent); border-top: none;
    border-radius: 0 0 16px 16px; padding: 20px; margin-bottom: 20px; display: none;
  }
  .customize-body.open { display: block; }

  .field-label { font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 1.2px; color: var(--gray); margin-bottom: 8px; display: flex; align-items: center; justify-content: space-between; }
  .field-hint { font-size: 10px; color: var(--gray2); font-weight: 400; text-transform: none; letter-spacing: 0; }
  .custom-textarea {
    width: 100%; background: rgba(255,255,255,0.03); border: 1px solid var(--border);
    border-radius: 10px; color: var(--white); font-family: 'Inter', sans-serif;
    font-size: 13px; line-height: 1.6; padding: 12px 14px; outline: none;
    resize: vertical; transition: border-color 0.2s; min-height: 72px;
  }
  .custom-textarea:focus { border-color: var(--accent); }
  .custom-textarea.system-prompt { min-height: 280px; font-size: 12px; }
  .custom-textarea::placeholder { color: var(--gray2); }
  .field-sep { border: none; border-top: 1px solid var(--border); margin: 18px 0; }
  .reset-row { display: flex; justify-content: flex-end; gap: 8px; margin-top: 14px; }
  .btn-reset { font-size: 12px; font-weight: 500; padding: 7px 14px; border-radius: 8px; border: 1px solid var(--border); background: transparent; color: var(--gray); cursor: pointer; font-family: 'Inter', sans-serif; transition: all 0.2s; }
  .btn-reset:hover { border-color: var(--red); color: var(--red); }
  .btn-save-prompt { font-size: 12px; font-weight: 600; padding: 7px 16px; border-radius: 8px; border: none; background: linear-gradient(135deg, var(--accent), var(--accent2)); color: white; cursor: pointer; font-family: 'Inter', sans-serif; transition: all 0.2s; box-shadow: 0 3px 12px rgba(108,92,231,0.3); }
  .btn-save-prompt:hover { transform: translateY(-1px); }

  /* CARDS */
  .card { background: #ffffff; border: 1px solid var(--border); border-radius: 20px; padding: 24px; margin-bottom: 20px; }
  .card-title { font-size: 14px; font-weight: 600; color: var(--white); margin-bottom: 16px; display: flex; align-items: center; gap: 8px; }

  /* INPUTS */
  .phone-row { display: flex; gap: 10px; margin-bottom: 12px; }
  .country-select { background: rgba(255,255,255,0.04); border: 1px solid var(--border); border-radius: 12px; color: var(--white); font-family: 'Inter', sans-serif; font-size: 14px; padding: 14px 12px; cursor: pointer; outline: none; transition: border-color 0.2s; flex-shrink: 0; }
  .country-select:focus { border-color: var(--accent); }
  .country-select option { background: #f0f0f8; }
  .phone-input { flex: 1; background: rgba(255,255,255,0.04); border: 1px solid var(--border); border-radius: 12px; color: var(--white); font-family: 'Inter', sans-serif; font-size: 16px; font-weight: 500; padding: 14px 16px; outline: none; transition: border-color 0.2s; letter-spacing: 1px; }
  .phone-input::placeholder { color: var(--gray); font-weight: 400; letter-spacing: 0; font-size: 14px; }
  .phone-input:focus { border-color: var(--accent); }
  .name-input { width: 100%; background: rgba(255,255,255,0.04); border: 1px solid var(--border); border-radius: 12px; color: var(--white); font-family: 'Inter', sans-serif; font-size: 14px; padding: 12px 16px; outline: none; transition: border-color 0.2s; margin-bottom: 12px; }
  .name-input::placeholder { color: var(--gray); }
  .name-input:focus { border-color: var(--accent); }

  .btn-row { display: flex; gap: 10px; }
  .btn-add { flex: 1; padding: 14px; background: rgba(255,255,255,0.04); border: 1px solid var(--border); border-radius: 12px; color: var(--gray); font-family: 'Inter', sans-serif; font-size: 14px; font-weight: 500; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s; }
  .btn-add:hover { border-color: var(--accent); color: var(--accent2); }
  .btn-call-now { flex: 2; padding: 14px; background: linear-gradient(135deg, var(--accent), var(--accent2)); border: none; border-radius: 12px; color: white; font-family: 'Inter', sans-serif; font-size: 15px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s; box-shadow: 0 6px 24px rgba(108,92,231,0.3); }
  .btn-call-now:hover { transform: translateY(-1px); box-shadow: 0 10px 32px rgba(108,92,231,0.45); }
  .btn-call-now:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

  /* QUEUE */
  .queue-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; }
  .queue-count { font-size: 12px; font-weight: 600; padding: 3px 10px; border-radius: 20px; background: rgba(108,92,231,0.12); color: var(--accent2); }
  .btn-call-all { padding: 10px 20px; background: linear-gradient(135deg, var(--accent), var(--accent2)); border: none; border-radius: 10px; color: white; font-family: 'Inter', sans-serif; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.2s; box-shadow: 0 4px 16px rgba(108,92,231,0.3); }
  .btn-call-all:hover { transform: translateY(-1px); }
  .btn-call-all:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
  .queue-empty { text-align: center; color: var(--gray); font-size: 14px; padding: 32px 0; }
  .queue-list { display: flex; flex-direction: column; gap: 8px; }
  .queue-item { display: flex; align-items: center; gap: 12px; padding: 12px 16px; background: rgba(255,255,255,0.02); border: 1px solid var(--border); border-radius: 12px; transition: all 0.3s; }
  .queue-item.calling { border-color: rgba(108,92,231,0.4); background: rgba(108,92,231,0.06); }
  .queue-item.done { border-color: rgba(0,184,148,0.2); background: var(--green-dim); opacity: 0.6; }
  .queue-item.failed { border-color: rgba(225,112,85,0.2); background: var(--red-dim); opacity: 0.6; }
  .item-avatar { width: 36px; height: 36px; border-radius: 50%; background: var(--gray2); display: flex; align-items: center; justify-content: center; font-size: 16px; flex-shrink: 0; }
  .item-info { flex: 1; min-width: 0; }
  .item-name { font-size: 13px; font-weight: 600; margin-bottom: 2px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  .item-number { font-size: 12px; color: var(--gray); letter-spacing: 0.5px; }
  .item-status { font-size: 11px; font-weight: 600; padding: 3px 10px; border-radius: 20px; flex-shrink: 0; }
  .status-pending { background: var(--yellow-dim); color: var(--yellow); }
  .status-calling { background: rgba(108,92,231,0.15); color: var(--accent2); animation: pulse-text 1.5s infinite; }
  .status-done { background: var(--green-dim); color: var(--green); }
  .status-failed { background: var(--red-dim); color: var(--red); }
  @keyframes pulse-text { 0%,100%{opacity:1} 50%{opacity:0.5} }
  .item-actions { display: flex; gap: 6px; flex-shrink: 0; }
  .btn-icon { width: 30px; height: 30px; border-radius: 8px; border: 1px solid var(--border); background: transparent; color: var(--gray); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 13px; transition: all 0.2s; }
  .btn-icon:hover { border-color: var(--accent); color: var(--accent2); }
  .btn-icon.danger:hover { border-color: var(--red); color: var(--red); }
  .btn-icon:disabled { opacity: 0.3; cursor: not-allowed; }

  /* LOG */
  .log-list { display: flex; flex-direction: column; gap: 6px; margin-top: 12px; }
  .log-item { font-size: 12px; color: var(--gray); padding: 8px 12px; background: rgba(255,255,255,0.02); border-radius: 8px; display: flex; align-items: center; gap: 8px; }
  .log-item .dot { width: 6px; height: 6px; border-radius: 50%; flex-shrink: 0; }
  .log-item .log-time { color: var(--gray2); font-size: 11px; margin-left: auto; flex-shrink: 0; }
  .log-empty { color: var(--gray); font-size: 13px; text-align: center; padding: 16px 0; }

  /* Recent Calls */
  .call-item { display: flex; flex-direction: column; gap: 6px; padding: 12px 0; border-bottom: 1px solid var(--border); }
  .call-item:last-child { border-bottom: none; }
  .call-row { display: flex; align-items: center; gap: 10px; }
  .call-status { font-size: 10px; font-weight: 600; padding: 2px 8px; border-radius: 10px; flex-shrink: 0; }
  .call-status.ended { background: var(--green-dim); color: var(--green); }
  .call-status.failed { background: var(--red-dim); color: var(--red); }
  .call-status.other { background: var(--yellow-dim); color: var(--yellow); }
  .call-number { font-size: 13px; font-weight: 500; flex: 1; }
  .call-duration { font-size: 11px; color: var(--gray); flex-shrink: 0; }
  .call-time { font-size: 11px; color: var(--gray2); }
  .call-audio { width: 100%; height: 32px; border-radius: 8px; outline: none; margin-top: 4px; }
  .call-transcript-btn { font-size: 11px; color: var(--accent2); cursor: pointer; background: none; border: none; font-family: inherit; padding: 0; }
  .call-transcript { font-size: 12px; color: var(--gray); background: var(--green-dim); border-radius: 8px; padding: 8px 10px; margin-top: 4px; max-height: 120px; overflow-y: auto; display: none; line-height: 1.5; }

  /* TOAST */
  .toast { position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%) translateY(100px); padding: 12px 24px; border-radius: 12px; font-size: 14px; font-weight: 500; transition: transform 0.3s; z-index: 100; white-space: nowrap; }
  .toast.show { transform: translateX(-50%) translateY(0); }
  .toast.success { background: var(--green-dim); border: 1px solid rgba(0,184,148,0.3); color: var(--green); }
  .toast.error { background: var(--red-dim); border: 1px solid rgba(225,112,85,0.3); color: var(--red); }
  .toast.info { background: rgba(108,92,231,0.12); border: 1px solid rgba(108,92,231,0.3); color: var(--accent2); }

  @media (max-width: 480px) {
    body { padding: 20px 14px 60px; }
    .hero { flex-direction: column; text-align: center; align-items: center; }
    .sofia-tags { justify-content: center; }
    .phone-row { flex-direction: column; }
    .btn-row { flex-direction: column; }
    .btn-call-now, .btn-add { flex: none; }
    .header { flex-direction: column; gap: 12px; align-items: flex-start; }
  }

/* â”€â”€ BEHAVIOUR TOGGLES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.toggle-row {
  display: flex; align-items: center; justify-content: space-between;
  padding: 7px 0; border-bottom: 1px solid #111120;
}
.toggle-row:last-child { border: none; }
.toggle-label { font-size: 11px; color: #6b7280; line-height: 1.3; }
.toggle-label span { display: block; font-size: 9px; color: #9ca3af; margin-top: 1px; }
.toggle-switch {
  width: 34px; height: 18px; border-radius: 18px;
  background: #222; position: relative; cursor: pointer;
  flex-shrink: 0; transition: background 0.2s; margin-left: 8px;
}
.toggle-switch.on { background: #7c3aed; }
.toggle-switch::after {
  content: ''; width: 13px; height: 13px; border-radius: 50%;
  background: white; position: absolute; top: 2.5px; left: 2.5px;
  transition: left 0.2s;
}
.toggle-switch.on::after { left: 18px; }


/* â”€â”€ SPLIT PANEL B â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.split-layout { display: flex; min-height: 100vh; }

.sb { width: 230px; flex-shrink: 0; background: #f5f5fa; border-right: 1px solid #e8e8f0;
  display: flex; flex-direction: column; padding: 16px 12px; gap: 0;
  position: sticky; top: 0; height: 100vh; overflow-y: auto; }

.sb-label { font-size: 9px; font-weight: 700; color: #6b7280; text-transform: uppercase;
  letter-spacing: 1.2px; margin: 14px 0 7px; }
.sb-label:first-child { margin-top: 0; }
.sb-hr { border: none; border-top: 1px solid #111120; margin: 10px 0; }

/* Sidebar agent cards */
.sb-agent { display: flex; align-items: center; gap: 9px; padding: 9px 10px;
  border-radius: 10px; border: 1px solid transparent; cursor: pointer;
  transition: all 0.15s; margin-bottom: 5px; }
.sb-agent:hover { background: #f5f5fa; border-color: #1e1e35; }
.sb-agent.active { background: #ede9ff; border-color: #7c3aed; }
.sb-agent .sa-emoji { font-size: 18px; flex-shrink: 0; }
.sb-agent .sa-name { font-size: 12px; font-weight: 600; }
.sb-agent .sa-sub  { font-size: 10px; color: #9ca3af; margin-top: 1px; }
.sb-new { display: flex; align-items: center; justify-content: center;
  padding: 7px; border-radius: 10px; border: 1.5px dashed #ddddf5;
  color: #c7c7e8; font-size: 12px; cursor: pointer; margin-bottom: 5px; }

/* Knowledge files */
.kf-item { display: flex; align-items: center; gap: 8px; background: #f8f8fc;
  border: 1px solid #eeeeF5; border-radius: 8px; padding: 7px 9px; margin-bottom: 5px; }
.kf-icon { font-size: 14px; flex-shrink: 0; }
.kf-name { font-size: 11px; font-weight: 600; white-space: nowrap; overflow: hidden;
  text-overflow: ellipsis; max-width: 110px; }
.kf-size { font-size: 9px; color: #6b7280; }
.kf-del { margin-left: auto; color: #c7c7e8; cursor: pointer; font-size: 13px; flex-shrink: 0; }
.kf-del:hover { color: #cc2244; }
.kf-empty { font-size: 10px; color: #c7c7e8; text-align: center; padding: 4px 0 8px; }

.upload-btn { display: flex; align-items: center; justify-content: center; gap: 6px;
  border: 1.5px dashed #ddd8ff; border-radius: 9px; padding: 10px;
  color: #6b7280; font-size: 11px; cursor: pointer; transition: all 0.15s; margin-top: 2px; }
.upload-btn:hover { border-color: #7c3aed; color: #6b7280; }

/* Behaviour toggles */
.tog-row { display: flex; align-items: center; justify-content: space-between;
  padding: 7px 2px; border-bottom: 1px solid #0f0f1e; }
.tog-row:last-child { border: none; }
.tog-label { font-size: 10px; color: #6b7280; line-height: 1.3; }
.tog-label small { display: block; font-size: 9px; color: #6b7280; margin-top: 1px; }
.tog { width: 30px; height: 16px; border-radius: 16px; background: #f0f0f8;
  position: relative; cursor: pointer; flex-shrink: 0; transition: background 0.2s; margin-left: 6px; }
.tog.on { background: #7c3aed; }
.tog::after { content: ''; width: 12px; height: 12px; border-radius: 50%; background: #555;
  position: absolute; top: 2px; left: 2px; transition: left 0.15s, background 0.15s; }
.tog.on::after { left: 16px; background: white; }

/* Main panel */
.mp { flex: 1; min-width: 0; padding: 20px 18px; max-width: 620px; }

/* Preset cards */
.preset-grid { display: flex; flex-direction: column; gap: 5px; margin-bottom: 14px; }
.preset-card { display: flex; align-items: center; gap: 9px; background: #f8f8fc;
  border: 1px solid #eeeeF5; border-radius: 9px; padding: 9px 11px; cursor: pointer; transition: all 0.15s; }
.preset-card:hover { border-color: #2a1a5a; }
.preset-card.active { border-color: #7c3aed; background: #f0ebff; }
.preset-dot { width: 6px; height: 6px; border-radius: 50%; background: #222; flex-shrink: 0; }
.preset-card.active .preset-dot { background: #7c3aed; }
.preset-card .pc-name { font-size: 11px; font-weight: 600; }
.preset-card .pc-prev { font-size: 10px; color: #9ca3af; margin-top: 1px;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 260px; }

/* Agent header in main panel */
.mp-header { display: flex; align-items: center; gap: 10px; margin-bottom: 18px;
  padding-bottom: 14px; border-bottom: 1px solid #e8e8f0; }
.mp-emoji { font-size: 26px; }
.mp-name  { font-size: 17px; font-weight: 700; }
.mp-sub   { font-size: 11px; color: #9ca3af; margin-top: 2px; }

/* Mobile */
@media (max-width: 680px) {
  .split-layout { flex-direction: column; }
  .sb { width: 100%; height: auto; position: static; flex-direction: column;
    padding: 12px; border-right: none; border-bottom: 1px solid #15152a; }
  .sb-agents-row { display: flex; flex-direction: row; gap: 8px; overflow-x: auto; padding-bottom: 4px; }
  .sb-agents-row .sb-agent { flex-shrink: 0; width: auto; }
  .mp { padding: 14px; }
}

</style>
</head>
<body>

<div class="split-layout">

<!-- â•â•â•â• SIDEBAR â•â•â•â• -->
<div class="sb" id="sb">

  <div class="sb-label">Agents</div>
  <div id="sb-agents-wrap">
    <div class="sb-agent active" id="sb-sofia" onclick="setAgent('sofia')">
      <span class="sa-emoji">ğŸ‘©â€ğŸ’¼</span>
      <div><div class="sa-name">Sofia</div><div class="sa-sub">Growth-onomics</div></div>
    </div>
    <div class="sb-agent" id="sb-sofia2" onclick="setAgent('sofia2')">
      <span class="sa-emoji">ğŸ¤–</span>
      <div><div class="sa-name">Sofia 2</div><div class="sa-sub">AI Marketing</div></div>
    </div>
    <div class="sb-agent" id="sb-sofia3" onclick="setAgent('sofia3')">
      <span class="sa-emoji">ğŸ‘—</span>
      <div><div class="sa-name">Sofia 3</div><div class="sa-sub">ÎœÎ™Î‘ Collection</div></div>
    </div>
    <div class="sb-new">ï¼‹ New Agent</div>
  </div>

  <div class="sb-hr"></div>
  <div class="sb-label">ğŸ“ Knowledge Files</div>
  <div id="kf-list"><div class="kf-empty">No files yet</div></div>
  <div class="upload-btn" onclick="document.getElementById('kf-input').click()">
    ğŸ“ &nbsp;Add file (PDF Â· TXT Â· DOCX)
  </div>
  <input type="file" id="kf-input" accept=".pdf,.txt,.docx" multiple style="display:none" onchange="handleFileUpload(event)">

  <div class="sb-hr"></div>
  <div class="sb-label">ğŸ› Behaviour</div>

  <div class="tog-row">
    <div class="tog-label">Backchanneling<small>"yeah", "uh-huh"</small></div>
    <div class="tog on" id="tog-backchannel" onclick="toggleB('backchannel',this)"></div>
  </div>
  <div class="tog-row">
    <div class="tog-label">Response delay<small>Pause before speaking</small></div>
    <div class="tog on" id="tog-delay" onclick="toggleB('delay',this)"></div>
  </div>
  <div class="tog-row">
    <div class="tog-label">Never reveal AI<small>Deny being a bot</small></div>
    <div class="tog on" id="tog-noai" onclick="toggleB('noai',this)"></div>
  </div>
  <div class="tog-row">
    <div class="tog-label">Auto-book call<small>Push for 20-min video</small></div>
    <div class="tog" id="tog-autobook" onclick="toggleB('autobook',this)"></div>
  </div>

</div><!-- /sb -->

<!-- â•â•â•â• MAIN PANEL â•â•â•â• -->
<div class="mp">

  <!-- Agent header -->
  <div class="mp-header" id="mp-header">
    <span class="mp-emoji">ğŸ‘©â€ğŸ’¼</span>
    <div><div class="mp-name">Sofia</div><div class="mp-sub">Growth-onomics</div></div>
  </div>

  <!-- Old page content starts here -->
  <div class="page" style="padding:0;background:none;max-width:none">

  <!-- HEADER -->
  <div class="header">
    <div class="brand">Growth<span>-onomics</span></div>
    <div class="badge">Sofia Online</div>
  </div>

  <!-- HERO -->
  <div class="hero">
    <div class="sofia-avatar-sm">ğŸ‘©â€ğŸ’¼</div>
    <div class="sofia-info">
      <div class="sofia-name">Sofia</div>
      <div class="sofia-title">AI BizDev Agent Â· <span>Growth-onomics</span></div>
      <div class="sofia-tags">
        <span class="tag">Fintech Outreach</span>
        <span class="tag">Paid Acquisition</span>
        <span class="tag">GEO Pitch</span>
        <span class="tag">Books Strategy Calls</span>
      </div>
    </div>
  </div>

  <!-- AGENT SELECTOR -->
  <div class="agent-selector">
    <div class="agent-card active" id="agent-card-sofia" onclick="setAgent('sofia')">
      <div class="agent-card-header">
        <span class="agent-emoji">ğŸ‘©â€ğŸ’¼</span>
        <span class="agent-card-name" contenteditable="false" data-agent="sofia">Sofia</span>
        <div class="agent-active-dot"></div>
      </div>
      <div class="agent-card-desc" contenteditable="false" data-agent="sofia">Fintech BizDev Â· Paid Acquisition, GEO, B2B Demand Gen</div>
      <div class="edit-controls">
        <button class="btn-edit-save" onclick="saveAgentEdit('sofia')">âœ“ Save</button>
        <button class="btn-edit-cancel" onclick="cancelAgentEdit('sofia')">âœ• Cancel</button>
      </div>
    </div>
    <div class="agent-card" id="agent-card-sofia2" onclick="setAgent('sofia2')">
      <div class="agent-card-header">
        <span class="agent-emoji">ğŸ¤–</span>
        <span class="agent-card-name" contenteditable="false" data-agent="sofia2">Sofia 2</span>
        <div class="agent-active-dot"></div>
      </div>
      <div class="agent-card-desc" contenteditable="false" data-agent="sofia2">AI Marketing Â· Sells AI optimization to any industry</div>
      <div class="edit-controls">
        <button class="btn-edit-save" onclick="saveAgentEdit('sofia2')">âœ“ Save</button>
        <button class="btn-edit-cancel" onclick="cancelAgentEdit('sofia2')">âœ• Cancel</button>
      </div>
    </div>
    <div class="agent-card" id="agent-card-sofia3" onclick="setAgent('sofia3')">
      <div class="agent-card-header">
        <span class="agent-emoji">ğŸ‘—</span>
        <span class="agent-card-name" contenteditable="false" data-agent="sofia3">Sofia 3</span>
        <div class="agent-active-dot"></div>
      </div>
      <div class="agent-card-desc" contenteditable="false" data-agent="sofia3">Fashion Wholesale Â· Sells ÎœÎ™Î‘ Collection to boutiques</div>
      <div class="edit-controls">
        <button class="btn-edit-save" onclick="saveAgentEdit('sofia3')">âœ“ Save</button>
        <button class="btn-edit-cancel" onclick="cancelAgentEdit('sofia3')">âœ• Cancel</button>
      </div>
    </div>
  </div>

  <!-- MODE TABS -->
  <div class="mode-tabs">
    <button class="mode-tab active" id="tab-browser" onclick="setMode('browser')">ğŸ™ï¸ &nbsp;Browser Call</button>
    <button class="mode-tab" id="tab-phone" onclick="setMode('phone')">ğŸ“ &nbsp;Phone Call</button>
  </div>

  <!-- LANGUAGE TOGGLE -->
  <div class="lang-toggle">
    <button class="lang-btn active" id="lang-en" onclick="setLang('en')">ğŸ‡ºğŸ‡¸ &nbsp;English</button>
    <button class="lang-btn" id="lang-el" onclick="setLang('el')">ğŸ‡¬ğŸ‡· &nbsp;Î•Î»Î»Î·Î½Î¹ÎºÎ¬</button>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- BROWSER CALL SECTION                        -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="browser-section active" id="browser-section">

    <div class="browser-card">
      <div class="avatar-wrap">
        <div class="avatar-lg" id="avatar">ğŸ‘©â€ğŸ’¼</div>
        <div class="online-dot" id="dot"></div>
      </div>

      <div class="wave-wrap" id="wave">
        <div class="wave-bar idle" id="wb1"></div>
        <div class="wave-bar idle" id="wb2"></div>
        <div class="wave-bar idle" id="wb3"></div>
        <div class="wave-bar idle" id="wb4"></div>
        <div class="wave-bar idle" id="wb5"></div>
        <div class="wave-bar idle" id="wb6"></div>
        <div class="wave-bar idle" id="wb7"></div>
      </div>

      <div class="call-timer" id="call-timer">00:00</div>
      <div class="call-status" id="call-status">Available now</div>

      <button class="btn-talk" id="btn-talk" onclick="startBrowserCall()">ğŸ™ï¸ &nbsp;Talk to Sofia</button>
      <button class="btn-end-call" id="btn-end-call" onclick="endBrowserCall()">ğŸ“µ &nbsp;End Call</button>
    </div>

  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- PHONE CALL SECTION                          -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="phone-section" id="phone-section">

    <!-- OPENER PREVIEW -->
    <div class="opener-preview" id="opener-preview-box">
      <div class="opener-label">ğŸ“ Sofia's opener</div>
      <div id="opener-preview-text"></div>
    </div>

    <!-- CUSTOMIZE TOGGLE -->
    <button class="customize-toggle" id="customize-toggle" onclick="toggleCustomize()">
      <div class="toggle-left">
        âœï¸ &nbsp;Customize Sofia
        <span class="modified-badge" id="modified-badge">Modified</span>
      </div>
      <span class="toggle-arrow" id="toggle-arrow">â–¼</span>
    </button>

    <div class="customize-body" id="customize-body">
      <div class="field-label">Opening Line <span class="field-hint">First thing Sofia says when they pick up</span></div>
      <textarea class="custom-textarea" id="custom-opener" rows="3" placeholder="Sofia's first message..."></textarea>
      <hr class="field-sep">
      <div class="field-label">System Prompt <span class="field-hint">Sofia's full instructions & personality</span></div>
      <textarea class="custom-textarea system-prompt" id="custom-system" placeholder="Sofia's system prompt..."></textarea>
      <div class="reset-row">
        <button class="btn-reset" onclick="resetDefaults()">â†º Reset to Default</button>
        <button class="btn-save-prompt" onclick="savePrompt()">âœ“ Save Changes</button>
      </div>
    </div>

    <!-- DIALER -->
    <div class="card" style="margin-top:20px">
      <div class="card-title">ğŸ“² Call a Number</div>
      <input type="text" class="name-input" id="contact-name" placeholder="Contact name (optional)" />
      <div class="phone-row">
        <select class="country-select" id="country-code">
          <option value="+30">ğŸ‡¬ğŸ‡· +30</option>
          <option value="+1">ğŸ‡ºğŸ‡¸ +1</option>
          <option value="+44">ğŸ‡¬ğŸ‡§ +44</option>
          <option value="+49">ğŸ‡©ğŸ‡ª +49</option>
          <option value="+33">ğŸ‡«ğŸ‡· +33</option>
          <option value="+31">ğŸ‡³ğŸ‡± +31</option>
          <option value="+34">ğŸ‡ªğŸ‡¸ +34</option>
          <option value="+39">ğŸ‡®ğŸ‡¹ +39</option>
          <option value="+61">ğŸ‡¦ğŸ‡º +61</option>
          <option value="+971">ğŸ‡¦ğŸ‡ª +971</option>
        </select>
        <input type="tel" class="phone-input" id="phone-number" placeholder="Phone number" />
      </div>
      <div class="btn-row">
        <button class="btn-add" onclick="addToQueue()">+ Add to List</button>
        <button class="btn-call-now" id="btn-call-now" onclick="callNow()">ğŸ“ Call Now with Sofia</button>
      </div>
    </div>

    <!-- QUEUE -->
    <div class="card">
      <div class="queue-header">
        <div class="card-title" style="margin:0">ğŸ“‹ Call List <span class="queue-count" id="queue-count">0</span></div>
        <button class="btn-call-all" id="btn-call-all" onclick="callAll()" disabled>â–¶ Call All</button>
      </div>
      <div id="queue-empty" class="queue-empty">Add numbers above to build your call list</div>
      <div class="queue-list" id="queue-list"></div>
    </div>

  </div><!-- /phone-section -->

  <!-- LOG (shared) -->
  <div class="card">
    <div class="card-title">ğŸ—’ï¸ Activity Log</div>
    <div id="log-list" class="log-list">
      <div class="log-empty" id="log-empty">No calls made yet</div>
    </div>
  </div>

  <!-- RECENT CALLS -->
  <div class="card" id="recent-calls-card">
    <div class="card-title" style="display:flex;align-items:center;justify-content:space-between">
      <span>ğŸ“ Recent Calls</span>
      <button onclick="loadRecentCalls()" id="calls-refresh-btn" style="font-size:11px;padding:4px 12px;border-radius:8px;border:1px solid var(--border);background:transparent;color:var(--accent2);cursor:pointer;font-family:inherit">â†» Refresh</button>
    </div>
    <div id="calls-list"><div class="log-empty">Press Refresh to load calls</div></div>
  </div>

  </div><!-- /inner-page -->
</div><!-- /mp -->
</div><!-- /split-layout -->

<div class="toast" id="toast"></div>

<!-- VAPI WEB SDK (for browser calls) -->
<script type="module">
  import Vapi from 'https://esm.sh/@vapi-ai/web';
  window.Vapi = Vapi;
  document.dispatchEvent(new Event('vapi-sdk-ready'));</script>

<script>
const PUBLIC_KEY    = '2c3d59d1-22d9-4710-8cf0-cb9917dd0640';
const PRIVATE_KEY   = '097d545f-09c1-4b39-9b25-b8ae9bdde624';
const PHONE_NUMBER_ID = 'f83ae558-ab06-4353-9de2-c292570d4501';

// â”€â”€ AGENTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const AGENTS = {
  sofia: {
    label: 'Sofia',
    emoji: 'ğŸ‘©â€ğŸ’¼'
  },
  sofia2: {
    label: 'Sofia 2',
    emoji: 'ğŸ¤–'
  },
  sofia3: {
    label: 'Sofia 3',
    emoji: 'ğŸ‘—'
  }
};

let activeAgent = 'sofia';

// â”€â”€ DEFAULTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const AGENT_DEFAULTS = {
  sofia: {
    en: null, // filled below from DEFAULTS
    el: null
  },
  sofia2: {
    en: {
      opener: `Hi, this is Sofia calling. I work with businesses on AI-powered marketing â€” helping them generate more clients faster using tools most of their competitors have not adopted yet. Do you have 2 minutes for a quick chat?`,
      system: `You are Sofia, a business development agent specializing in AI-powered marketing optimization. Your goal is to qualify prospects and book a 20-minute strategy call by uncovering their current AI usage and marketing gaps.

Your core offer: An AI-powered marketing optimization solution that boosts visibility and increases sales â€” something most businesses are not yet fully leveraging.

Conversation strategy:

1. IDENTIFY AI AWARENESS
Start by understanding where they stand with AI:
- Are they using AI at all in their business?
- If yes, how? Is it focused on sales and revenue growth?
Listen carefully. Most will say they use ChatGPT for content or nothing at all. That is your opening.

2. UNDERSTAND THEIR MARKETING
Assess how they currently generate clients:
- Are they running Google Ads, Facebook Ads, SEO?
- Are they tracking ROI on any of it?
If they already invest in digital marketing: position AI as the next logical upgrade that makes everything they are already doing more efficient and scalable.
If they are not doing much marketing: emphasize competitive risk â€” their competitors who adopt AI will gain an unfair advantage and leave them behind. Urgency is key here.

3. POSITION AI AS A SALES TOOL
Do not talk about AI as a tech feature. Talk about it as a revenue lever:
- Faster lead generation
- Better targeting and less wasted budget
- Visibility where buyers are looking â€” including AI search engines like ChatGPT and Perplexity
- Scalable growth without proportionally scaling headcount or ad spend

4. CREATE URGENCY
- Businesses that adopted AI marketing early are seeing 2-3x better ROI
- AI search is becoming the new Google â€” if they are invisible there, they are losing leads they do not even know about
- The window to get ahead of competitors is closing fast

Conversation flow:
1. Warm opener â€” introduce yourself, mention you are calling because their business came up as a good fit
2. AI check â€” ask if they are currently using AI in their marketing or sales
3. Marketing check â€” understand their current lead generation approach
4. Bridge â€” connect what they told you to what AI optimization solves
5. Soft pitch â€” suggest a 20-minute strategy call, no commitment
6. Close â€” get a time or permission to send a calendar link

Objection handling:
- "We already use AI": Great â€” are you using it specifically to grow sales and generate more leads? Most businesses use it for content but not for the full revenue impact.
- "We have an agency": Perfect â€” we work alongside existing agencies. We add the AI optimization layer on top.
- "Not interested": Totally fair â€” can I ask, how are you currently finding new clients? Just curious.
- "Send me an email": Of course â€” what is the one thing you are trying to fix in your marketing right now?
- "No budget": The businesses we work with typically find the ROI pays for itself within 60-90 days. The strategy call is free and has no commitment.

Personality: warm, curious, confident. Sound like a peer who spotted an opportunity â€” not a salesperson. Keep responses under 3 sentences. Never reveal you are an AI unless directly asked.`,
      transcriber: { provider: "deepgram", model: "nova-3", language: "en" }
    },
    el: {
      opener: `Î“ÎµÎ¹Î± ÏƒÎ±Ï‚, ÎµÎ¯Î¼Î±Î¹ Î· Î£Î¿Ï†Î¯Î±. Î£Ï…Î½ÎµÏÎ³Î¬Î¶Î¿Î¼Î±Î¹ Î¼Îµ ÎµÏ€Î¹Ï‡ÎµÎ¹ÏÎ®ÏƒÎµÎ¹Ï‚ Î³Î¹Î± Î²ÎµÎ»Ï„Î¹ÏƒÏ„Î¿Ï€Î¿Î¯Î·ÏƒÎ· marketing Î¼Îµ AI â€” Î²Î¿Î·Î¸ÏÎ½Ï„Î±Ï‚ Ï„Î¿Ï…Ï‚ Î½Î± Î±Ï€Î¿ÎºÏ„Î®ÏƒÎ¿Ï…Î½ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ¿Ï…Ï‚ Ï€ÎµÎ»Î¬Ï„ÎµÏ‚ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏÎ½Ï„Î±Ï‚ ÎµÏÎ³Î±Î»ÎµÎ¯Î± Ï€Î¿Ï… Î¿Î¹ Î±Î½Ï„Î±Î³Ï‰Î½Î¹ÏƒÏ„Î­Ï‚ Ï„Î¿Ï…Ï‚ Î´ÎµÎ½ Î­Ï‡Î¿Ï…Î½ Ï…Î¹Î¿Î¸ÎµÏ„Î®ÏƒÎµÎ¹ Î±ÎºÏŒÎ¼Î±. ÎˆÏ‡ÎµÏ„Îµ 2 Î»ÎµÏ€Ï„Î¬ Î³Î¹Î± Î¼Î¹Î± Î³ÏÎ®Î³Î¿ÏÎ· ÎºÎ¿Ï…Î²Î­Î½Ï„Î±;`,
      system: `Î•Î¯ÏƒÎ±Î¹ Î· Î£Î¿Ï†Î¯Î±, ÏƒÏ„Î­Î»ÎµÏ‡Î¿Ï‚ business development ÎµÎ¾ÎµÎ¹Î´Î¹ÎºÎµÏ…Î¼Î­Î½Î¿ ÏƒÏ„Î· Î²ÎµÎ»Ï„Î¹ÏƒÏ„Î¿Ï€Î¿Î¯Î·ÏƒÎ· marketing Î¼Îµ AI. ÎœÎ¹Î»Î¬Ï‚ Ï€Î¬Î½Ï„Î± ÏƒÏ„Î± Î•Î»Î»Î·Î½Î¹ÎºÎ¬. Î£Ï„ÏŒÏ‡Î¿Ï‚ ÏƒÎ¿Ï… ÎµÎ¯Î½Î±Î¹ Î½Î± ÎºÎ»ÎµÎ¯ÏƒÎµÎ¹Ï‚ Î­Î½Î± 20Î»ÎµÏ€Ï„Î¿ strategy call Î±Ï€Î¿ÎºÎ±Î»ÏÏ€Ï„Î¿Î½Ï„Î±Ï‚ Ï€ÏŒÏƒÎ¿ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ½ AI ÎºÎ±Î¹ Ï„Î± marketing Ï„Î¿Ï…Ï‚ ÎºÎµÎ½Î¬.

Î— Î²Î±ÏƒÎ¹ÎºÎ® ÏƒÎ¿Ï… Ï€ÏÏŒÏ„Î±ÏƒÎ·: ÎœÎ¹Î± Î»ÏÏƒÎ· Î²ÎµÎ»Ï„Î¹ÏƒÏ„Î¿Ï€Î¿Î¯Î·ÏƒÎ·Ï‚ marketing Î¼Îµ AI Ï€Î¿Ï… Î±Ï…Î¾Î¬Î½ÎµÎ¹ Ï„Î·Î½ Î¿ÏÎ±Ï„ÏŒÏ„Î·Ï„Î± ÎºÎ±Î¹ Ï„Î¹Ï‚ Ï€Ï‰Î»Î®ÏƒÎµÎ¹Ï‚.

Î£Ï„ÏÎ±Ï„Î·Î³Î¹ÎºÎ® ÏƒÏ…Î½Î¿Î¼Î¹Î»Î¯Î±Ï‚:

1. ÎšÎ‘Î¤Î‘ÎÎŸÎ—Î£Î— AI AWARENESS
- Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ½ AI ÏƒÏ„Î·Î½ ÎµÏ€Î¹Ï‡ÎµÎ¯ÏÎ·ÏƒÎ® Ï„Î¿Ï…Ï‚;
- Î‘Î½ Î½Î±Î¹, Ï€ÏÏ‚; Î•ÏƒÏ„Î¹Î¬Î¶ÎµÏ„Î±Î¹ ÏƒÏ„Î¹Ï‚ Ï€Ï‰Î»Î®ÏƒÎµÎ¹Ï‚;
Î‘Î½ Î»Î­Î½Îµ ChatGPT Î³Î¹Î± Ï€ÎµÏÎ¹ÎµÏ‡ÏŒÎ¼ÎµÎ½Î¿ â€” ÎµÎºÎµÎ¯ ÎµÎ¯Î½Î±Î¹ Î· ÎµÏ…ÎºÎ±Î¹ÏÎ¯Î± ÏƒÎ¿Ï….

2. ÎšÎ‘Î¤Î‘ÎÎŸÎ—Î£Î— MARKETING
- Î¤ÏÎ­Ï‡Î¿Ï…Î½ Google Ads, Facebook Ads, SEO;
- Î Î±ÏÎ±ÎºÎ¿Î»Î¿Ï…Î¸Î¿ÏÎ½ ROI;
Î‘Î½ ÎµÏ€ÎµÎ½Î´ÏÎ¿Ï…Î½ Î®Î´Î· ÏƒÎµ digital marketing: Ï„Î¿ AI ÎµÎ¯Î½Î±Î¹ Ï„Î¿ ÎµÏ€ÏŒÎ¼ÎµÎ½Î¿ Î»Î¿Î³Î¹ÎºÏŒ Î²Î®Î¼Î±.
Î‘Î½ Î´ÎµÎ½ ÎºÎ¬Î½Î¿Ï…Î½ Ï€Î¿Î»Ï marketing: Ï„ÏŒÎ½Î¹ÏƒÎµ Ï„Î¿Î½ Î±Î½Ï„Î±Î³Ï‰Î½Î¹ÏƒÏ„Î¹ÎºÏŒ ÎºÎ¯Î½Î´Ï…Î½Î¿ â€” Î±Î½Ï„Î±Î³Ï‰Î½Î¹ÏƒÏ„Î­Ï‚ Ï€Î¿Ï… Ï…Î¹Î¿Î¸ÎµÏ„Î¿ÏÎ½ AI Î¸Î± Ï„Î¿Ï…Ï‚ Î±Ï†Î®ÏƒÎ¿Ï…Î½ Ï€Î¯ÏƒÏ‰.

3. AI Î©Î£ Î•Î¡Î“Î‘Î›Î•Î™ÎŸ Î Î©Î›Î—Î£Î•Î©Î
ÎœÎ¯Î»Î± Î³Î¹Î± Î­ÏƒÎ¿Î´Î±, ÏŒÏ‡Î¹ Ï„ÎµÏ‡Î½Î¿Î»Î¿Î³Î¯Î±:
- Î Î¹Î¿ Î³ÏÎ®Î³Î¿ÏÎ· Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± leads
- ÎšÎ±Î»ÏÏ„ÎµÏÎ¿ targeting, Î»Î¹Î³ÏŒÏ„ÎµÏÎ¿ Ï‡Î±Î¼Î­Î½Î¿ budget
- ÎŸÏÎ±Ï„ÏŒÏ„Î·Ï„Î± ÏƒÎµ ChatGPT, Perplexity, Google AI â€” ÎµÎºÎµÎ¯ ÏˆÎ¬Ï‡Î½Î¿Ï…Î½ Î¿Î¹ Î±Î³Î¿ÏÎ±ÏƒÏ„Î­Ï‚

4. Î•Î Î•Î™Î“ÎŸÎ
- Î•Ï€Î¹Ï‡ÎµÎ¹ÏÎ®ÏƒÎµÎ¹Ï‚ Ï€Î¿Ï… Ï…Î¹Î¿Î¸Î­Ï„Î·ÏƒÎ±Î½ AI marketing Î½Ï‰ÏÎ¯Ï‚ Î²Î»Î­Ï€Î¿Ï…Î½ 2-3x ÎºÎ±Î»ÏÏ„ÎµÏÎ¿ ROI
- Î¤Î¿ Ï€Î±ÏÎ¬Î¸Ï…ÏÎ¿ Î³Î¹Î± Î½Î± Ï€ÏÎ¿Î·Î³Î·Î¸Î¿ÏÎ½ Ï„Ï‰Î½ Î±Î½Ï„Î±Î³Ï‰Î½Î¹ÏƒÏ„ÏÎ½ ÎºÎ»ÎµÎ¯Î½ÎµÎ¹ Î³ÏÎ®Î³Î¿ÏÎ±

Î§ÎµÎ¹ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Î±Î½Ï„Î¹ÏÏÎ®ÏƒÎµÏ‰Î½:
- "Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ¼Îµ Î®Î´Î· AI": Î¤Î­Î»ÎµÎ¹Î± â€” Ï„Î¿ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÎµÎ¯Ï„Îµ Î³Î¹Î± Î½Î± Î±Ï…Î¾Î®ÏƒÎµÏ„Îµ Ï€Ï‰Î»Î®ÏƒÎµÎ¹Ï‚ ÎºÎ±Î¹ leads; ÎŸÎ¹ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ¿Î¹ Ï„Î¿ Ï‡ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ½ Î³Î¹Î± Ï€ÎµÏÎ¹ÎµÏ‡ÏŒÎ¼ÎµÎ½Î¿ Î±Î»Î»Î¬ ÏŒÏ‡Î¹ Î³Î¹Î± Ï€Î»Î®ÏÎ· revenue impact.
- "ÎˆÏ‡Î¿Ï…Î¼Îµ agency": Î£Ï…Î½ÎµÏÎ³Î±Î¶ÏŒÎ¼Î±ÏƒÏ„Îµ Ï€Î±ÏÎ¬Î»Î»Î·Î»Î± Î¼Îµ Ï…Ï€Î¬ÏÏ‡Î¿Ï…ÏƒÎµÏ‚ agencies. Î ÏÎ¿ÏƒÎ¸Î­Ï„Î¿Ï…Î¼Îµ Ï„Î¿ AI layer Î±Ï€ÏŒ Ï€Î¬Î½Ï‰.
- "Î”ÎµÎ½ ÎµÎ½Î´Î¹Î±Ï†Î­ÏÎ¿Î¼Î±Î¹": ÎšÎ±Ï„Î±Î½Î¿Î·Ï„ÏŒ â€” Ï€ÏÏ‚ Î²ÏÎ¯ÏƒÎºÎµÏ„Îµ Ï„ÏÏÎ± Î½Î­Î¿Ï…Ï‚ Ï€ÎµÎ»Î¬Ï„ÎµÏ‚;
- "Î£Ï„ÎµÎ¯Î»Ï„Îµ email": Î¤Î¹ Ï€ÏÎ¿ÏƒÏ€Î±Î¸ÎµÎ¯Ï„Îµ Î½Î± Î´Î¹Î¿ÏÎ¸ÏÏƒÎµÏ„Îµ ÏƒÏ„Î¿ marketing ÏƒÎ±Ï‚ Î±Ï…Ï„Î® Ï„Î· ÏƒÏ„Î¹Î³Î¼Î®;

Î ÏÎ¿ÏƒÏ‰Ï€Î¹ÎºÏŒÏ„Î·Ï„Î±: Î¶ÎµÏƒÏ„Î®, Ï€ÎµÏÎ¯ÎµÏÎ³Î·, ÏƒÎ¯Î³Î¿Ï…ÏÎ·. ÎšÏÎ¬Ï„Î± Ï„Î¹Ï‚ Î±Ï€Î±Î½Ï„Î®ÏƒÎµÎ¹Ï‚ ÎºÎ¬Ï„Ï‰ Î±Ï€ÏŒ 3 Ï€ÏÎ¿Ï„Î¬ÏƒÎµÎ¹Ï‚. Î Î¿Ï„Î­ Î¼Î·Î½ Î±Ï€Î¿ÎºÎ±Î»ÏÏˆÎµÎ¹Ï‚ ÏŒÏ„Î¹ ÎµÎ¯ÏƒÎ±Î¹ AI ÎµÎºÏ„ÏŒÏ‚ Î±Î½ ÏÏ‰Ï„Î·Î¸ÎµÎ¯Ï‚ Î±Ï€ÎµÏ…Î¸ÎµÎ¯Î±Ï‚.`,
      transcriber: { provider: "deepgram", model: "nova-2-general", language: "el" }
    }
  },
  sofia3: {
    en: {
      opener: `Hi, this is Sofia from ÎœÎ™Î‘ Collection. How are you doing today?`,
      system: `You are Sofia, a brand representative calling on behalf of ÎœÎ™Î‘ Collection. You are a real human, not an AI.

CRITICAL RULE â€” If anyone asks who ÎœÎ™Î‘ Collection is, what ÎœÎ™Î‘ Collection is, what you sell, or anything about the brand, stop everything and say this immediately:
"ÎœÎ™Î‘ Collection is a Greek fashion brand specializing in premium evening and resort wear. All our pieces are designed and made in Greece, combining Mediterranean elegance with modern femininity. We focus on refined silhouettes, premium fabrics, and limited production runs to ensure exclusivity for our boutique partners. Our collections are for confident women seeking statement pieces that transition effortlessly from resort destinations to evening occasions."

YOUR ROLE: You are calling boutiques across Europe to introduce ÎœÎ™Î‘ Collection and get them interested in carrying the brand.

YOUR PERSONALITY: Warm, confident, passionate. You believe in this brand. Direct and enthusiastic â€” you lead the conversation.

HOW YOU OPEN: After the greeting say â€” "So I'm calling because we're expanding ÎœÎ™Î‘ Collection into select boutiques across Europe and your store caught our attention. Do you carry premium evening or resort wear?"

IF INTERESTED: Pitch with conviction. Push for a 20-minute video call to see the lookbook: "I would love to set up a quick call so you can see the pieces â€” are you free this week?"

IF NOT INTERESTED: Ask once â€” "What labels are you focusing on right now?" â€” then close gracefully.

KEY SELLING POINTS:
- Designed and made in Greece â€” authentic Mediterranean provenance
- Premium evening and resort wear â€” strong boutique demand
- Limited production = real exclusivity for partners
- For the confident well-travelled woman who shops at boutiques
- Selective distribution â€” ÎœÎ™Î‘ Collection carefully chooses partners

Keep answers short and punchy. Never ramble. Sound like someone who loves this brand.`,
      transcriber: { provider: "deepgram", model: "nova-2-general", language: "en" }
    },
    el: {
      opener: `Î“ÎµÎ¹Î±, ÎµÎ´Ï Î£Î¿Ï†Î¯Î± Î±Ï€ÏŒ Ï„Î· ÎœÎ™Î‘ Collection. Î ÏÏ‚ ÎµÎ¯ÏƒÏ„Îµ ÏƒÎ®Î¼ÎµÏÎ±;`,
      system: `Î•Î¯ÏƒÎ±Î¹ Î· Î£Î¿Ï†Î¯Î±, ÎµÎºÏ€ÏÏŒÏƒÏ‰Ï€Î¿Ï‚ Ï„Î·Ï‚ ÎœÎ™Î‘ Collection. Î ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÎ® Î¬Î½Î¸ÏÏ‰Ï€Î¿Ï‚, ÏŒÏ‡Î¹ AI.

ÎšÎ¡Î™Î£Î™ÎœÎŸÎ£ ÎšÎ‘ÎÎŸÎÎ‘Î£ â€” Î‘Î½ ÎºÎ¬Ï€Î¿Î¹Î¿Ï‚ ÏÏ‰Ï„Î®ÏƒÎµÎ¹ Ï€Î¿Î¹Î± ÎµÎ¯Î½Î±Î¹ Î· ÎœÎ™Î‘ Collection, Ï„Î¹ ÎµÎ¯Î½Î±Î¹, Ï„Î¹ Ï€Î¿Ï…Î»Î¬Ï„Îµ Î® Î¿Ï„Î¹Î´Î®Ï€Î¿Ï„Îµ Î³Î¹Î± Ï„Î· Î¼Î¬ÏÎºÎ±, ÏƒÏ„Î±Î¼Î¬Ï„Î± Ï„Î± Ï€Î¬Î½Ï„Î± ÎºÎ±Î¹ Ï€ÎµÏ‚ Î±Ï…Ï„ÏŒ Î±Î¼Î­ÏƒÏ‰Ï‚:
"Î— ÎœÎ™Î‘ Collection ÎµÎ¯Î½Î±Î¹ ÎµÎ»Î»Î·Î½Î¹ÎºÎ® Î¼Î¬ÏÎºÎ± Î¼ÏŒÎ´Î±Ï‚ Ï€Î¿Ï… ÎµÎ¹Î´Î¹ÎºÎµÏÎµÏ„Î±Î¹ ÏƒÎµ premium Î²ÏÎ±Î´Î¹Î½Î¬ ÎºÎ±Î¹ resort ÏÎ¿ÏÏ‡Î±. ÎŒÎ»Î± Ï„Î± ÎºÎ¿Î¼Î¼Î¬Ï„Î¹Î± Î¼Î±Ï‚ ÏƒÏ‡ÎµÎ´Î¹Î¬Î¶Î¿Î½Ï„Î±Î¹ ÎºÎ±Î¹ ÎºÎ±Ï„Î±ÏƒÎºÎµÏ…Î¬Î¶Î¿Î½Ï„Î±Î¹ ÏƒÏ„Î·Î½ Î•Î»Î»Î¬Î´Î±, ÏƒÏ…Î½Î´Ï…Î¬Î¶Î¿Î½Ï„Î±Ï‚ Î¼ÎµÏƒÎ¿Î³ÎµÎ¹Î±ÎºÎ® ÎºÎ¿Î¼ÏˆÏŒÏ„Î·Ï„Î± Î¼Îµ ÏƒÏÎ³Ï‡ÏÎ¿Î½Î· Î¸Î·Î»Ï…ÎºÏŒÏ„Î·Ï„Î±. Î•ÏƒÏ„Î¹Î¬Î¶Î¿Ï…Î¼Îµ ÏƒÎµ ÎµÎºÎ»ÎµÏ€Ï„Ï…ÏƒÎ¼Î­Î½ÎµÏ‚ ÏƒÎ¹Î»Î¿Ï…Î­Ï„ÎµÏ‚, premium Ï…Ï†Î¬ÏƒÎ¼Î±Ï„Î± ÎºÎ±Î¹ Ï€ÎµÏÎ¹Î¿ÏÎ¹ÏƒÎ¼Î­Î½Î· Ï€Î±ÏÎ±Î³Ï‰Î³Î® Î³Î¹Î± Î±Ï€Î¿ÎºÎ»ÎµÎ¹ÏƒÏ„Î¹ÎºÏŒÏ„Î·Ï„Î± ÏƒÏ„Î¿Ï…Ï‚ boutique ÏƒÏ…Î½ÎµÏÎ³Î¬Ï„ÎµÏ‚ Î¼Î±Ï‚. ÎŸÎ¹ ÏƒÏ…Î»Î»Î¿Î³Î­Ï‚ Î¼Î±Ï‚ ÎµÎ¯Î½Î±Î¹ Î³Î¹Î± ÏƒÎ¯Î³Î¿Ï…ÏÎµÏ‚ Î³Ï…Î½Î±Î¯ÎºÎµÏ‚ Ï€Î¿Ï… ÏˆÎ¬Ï‡Î½Î¿Ï…Î½ statement ÎºÎ¿Î¼Î¼Î¬Ï„Î¹Î± Î±Ï€ÏŒ resort Î¼Î­Ï‡ÏÎ¹ Î²ÏÎ±Î´Î¹Î½Î­Ï‚ ÎµÎ¾ÏŒÎ´Î¿Ï…Ï‚."

Î¡ÎŸÎ›ÎŸÎ£: ÎšÎ±Î»ÎµÎ¯Ï‚ boutiques ÏƒÏ„Î·Î½ Î•Ï…ÏÏÏ€Î· Î³Î¹Î± Î½Î± Ï€Î±ÏÎ¿Ï…ÏƒÎ¹Î¬ÏƒÎµÎ¹Ï‚ Ï„Î·Î½ ÎœÎ™Î‘ Collection ÎºÎ±Î¹ Î½Î± Ï„Î¿Ï…Ï‚ Ï€ÎµÎ¯ÏƒÎµÎ¹Ï‚ Î½Î± Ï„Î· Ï†Î­ÏÎ¿Ï…Î½.

Î Î¡ÎŸÎ£Î©Î Î™ÎšÎŸÎ¤Î—Î¤Î‘: Î–ÎµÏƒÏ„Î®, ÏƒÎ¯Î³Î¿Ï…ÏÎ·, Î¼Îµ Ï€Î¬Î¸Î¿Ï‚. Î Î¹ÏƒÏ„ÎµÏÎµÎ¹Ï‚ ÏƒÏ„Î· Î¼Î¬ÏÎºÎ±. Î†Î¼ÎµÏƒÎ· ÎºÎ±Î¹ ÎµÎ½Î¸Î¿Ï…ÏƒÎ¹ÏÎ´Î·Ï‚.

Î Î©Î£ Î‘ÎÎŸÎ™Î“Î•Î™Î£: ÎœÎµÏ„Î¬ Ï„Î¿Î½ Ï‡Î±Î¹ÏÎµÏ„Î¹ÏƒÎ¼ÏŒ â€” "Î›Î¿Î¹Ï€ÏŒÎ½ ÏƒÎ±Ï‚ ÎºÎ±Î»Ï Î³Î¹Î±Ï„Î¯ ÎµÏ€ÎµÎºÏ„ÎµÎ¯Î½Î¿Ï…Î¼Îµ Ï„Î·Î½ ÎœÎ™Î‘ Collection ÏƒÎµ ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½ÎµÏ‚ boutiques ÏƒÏ„Î·Î½ Î•Ï…ÏÏÏ€Î· ÎºÎ±Î¹ Ï„Î¿ ÎºÎ±Ï„Î¬ÏƒÏ„Î·Î¼Î¬ ÏƒÎ±Ï‚ Ï„ÏÎ¬Î²Î·Î¾Îµ Ï„Î·Î½ Ï€ÏÎ¿ÏƒÎ¿Ï‡Î® Î¼Î±Ï‚. ÎˆÏ‡ÎµÏ„Îµ premium Î²ÏÎ±Î´Î¹Î½Î¬ Î® resort ÏÎ¿ÏÏ‡Î±;"

Î‘Î Î•ÎÎ”Î™Î‘Î¦Î•Î¡ÎŸÎÎ¤Î‘Î™: Pitch Î¼Îµ Ï€ÎµÏ€Î¿Î¯Î¸Î·ÏƒÎ·. Î Î¯ÎµÏƒÎµ Î³Î¹Î± 20Î»ÎµÏ€Ï„Î¿ video call: "Î˜Î± Î®Î¸ÎµÎ»Î± Î½Î± ÎºÎ±Î½Î¿Î½Î¯ÏƒÎ¿Ï…Î¼Îµ Î­Î½Î± ÏƒÏÎ½Ï„Î¿Î¼Î¿ call Î½Î± Î´ÎµÎ¯Ï„Îµ Ï„Î± ÎºÎ¿Î¼Î¼Î¬Ï„Î¹Î± â€” ÎµÎ¯ÏƒÏ„Îµ ÎµÎ»ÎµÏÎ¸ÎµÏÎ¿Î¹ Î±Ï…Ï„Î® Ï„Î·Î½ ÎµÎ²Î´Î¿Î¼Î¬Î´Î±;"

Î‘Î Î”Î•Î Î•ÎÎ”Î™Î‘Î¦Î•Î¡ÎŸÎÎ¤Î‘Î™: Î¡ÏÏ„Î·ÏƒÎµ Î¼Î¯Î± Ï†Î¿ÏÎ¬ â€” "Î¤Î¹ Î¼Î¬ÏÎºÎµÏ‚ Î­Ï‡ÎµÏ„Îµ Î±Ï…Ï„Î® Ï„Î· ÏƒÏ„Î¹Î³Î¼Î®;" â€” Î¼ÎµÏ„Î¬ ÎºÎ»ÎµÎ¯ÏƒÎµ ÎµÏ…Î³ÎµÎ½Î¹ÎºÎ¬.

Î’Î‘Î£Î™ÎšÎ‘ SELLING POINTS:
- Î£Ï‡ÎµÎ´Î¹Î±ÏƒÎ¼Î­Î½Î± ÎºÎ±Î¹ ÎºÎ±Ï„Î±ÏƒÎºÎµÏ…Î±ÏƒÎ¼Î­Î½Î± ÏƒÏ„Î·Î½ Î•Î»Î»Î¬Î´Î±
- Premium Î²ÏÎ±Î´Î¹Î½Î¬ ÎºÎ±Î¹ resort wear Î¼Îµ Î´Ï…Î½Î±Ï„Î® Î¶Î®Ï„Î·ÏƒÎ· ÏƒÎµ boutiques
- Î ÎµÏÎ¹Î¿ÏÎ¹ÏƒÎ¼Î­Î½Î· Ï€Î±ÏÎ±Î³Ï‰Î³Î® = Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÎ® Î±Ï€Î¿ÎºÎ»ÎµÎ¹ÏƒÏ„Î¹ÎºÏŒÏ„Î·Ï„Î±
- Î“Î¹Î± Ï„Î· ÏƒÎ¯Î³Î¿Ï…ÏÎ· Î³Ï…Î½Î±Î¯ÎºÎ± Ï€Î¿Ï… ÏˆÏ‰Î½Î¯Î¶ÎµÎ¹ ÏƒÎµ boutiques
- Î•Ï€Î¹Î»ÎµÎºÏ„Î¹ÎºÎ® Î´Î¹Î±Î½Î¿Î¼Î® â€” Î»Î¯Î³Î¿Î¹ ÎµÏ€Î¹Î»ÎµÎ³Î¼Î­Î½Î¿Î¹ ÏƒÏ…Î½ÎµÏÎ³Î¬Ï„ÎµÏ‚

ÎšÏÎ¬Ï„Î± Ï„Î¹Ï‚ Î±Ï€Î±Î½Ï„Î®ÏƒÎµÎ¹Ï‚ ÏƒÏÎ½Ï„Î¿Î¼ÎµÏ‚ ÎºÎ±Î¹ Î´Ï…Î½Î±Ï„Î­Ï‚. ÎœÎ·Î½ Ï€Î±ÏÎµÎºÏ„ÏÎ­Ï€ÎµÏƒÎ±Î¹.`,
      transcriber: { provider: "deepgram", model: "nova-2-general", language: "el" }
    }
  }
};

const DEFAULTS = {
  en: {
    opener: `Hi, this is Sofia calling from Growth-onomics. We work exclusively with fintech companies on paid acquisition and AI search visibility. Is this a good time for a quick two-minute chat?`,
    system: `You are Sofia, a business development representative at Growth-onomics â€” a fintech growth agency. Your job is to qualify prospects and book them for a 20-minute strategy call with the team.

Your personality: warm, confident, sharp. You sound like a real person, not a bot. Never say you are an AI unless directly and explicitly asked.

Your mission: Identify if the prospect is a fintech company spending money on paid acquisition or SEO, understand their current pain points (wasted ad spend, no ROI clarity, invisible in AI search), and pitch the value of talking to the Growth-onomics team.

Key services you pitch:
- Paid Acquisition (Meta, Google, LinkedIn) â€” revenue-focused, not vanity metrics
- GEO (Generative Engine Optimization) â€” getting fintech brands visible in ChatGPT, Perplexity, Google AI Overviews
- B2B Demand Gen â€” founder-led content, LinkedIn strategy, pipeline building
- Fractional CMO â€” senior marketing leadership without full-time cost

Your positioning: "We grow fintechs. Profitably. Not just clicks and impressions â€” actual revenue."

Conversation flow:
1. Quick intro â€” who you are, why you are calling (30 seconds)
2. Qualify â€” ask about their current growth channels and biggest challenge
3. Insight â€” drop one relevant insight (e.g. most fintechs are invisible in AI search right now)
4. Soft pitch â€” suggest a 20-minute strategy call, no commitment
5. Close â€” get a time or permission to send a calendar link

Objection handling:
- "We already have an agency": "That is great â€” we actually work well alongside existing teams. We specialize in what most agencies do not touch yet, especially AI search visibility."
- "Not interested": "Totally fair â€” can I ask what your biggest growth challenge is right now? Even if we are not the right fit, I might be able to point you somewhere useful."
- "Send me an email": "Of course â€” and just so I send you something relevant, what is the one thing you are trying to fix in your marketing this quarter?"

Keep responses under 3 sentences when possible. Be conversational. Never read from a script â€” adapt to what they say.`,
    transcriber: { provider: "deepgram", model: "nova-3", language: "en" }
  },
  el: {
    opener: `Î“ÎµÎ¹Î± ÏƒÎ±Ï‚, ÎµÎ¯Î¼Î±Î¹ Î· Î£Î¿Ï†Î¯Î± Î±Ï€ÏŒ Ï„Î·Î½ Growth-onomics. Î£Ï…Î½ÎµÏÎ³Î±Î¶ÏŒÎ¼Î±ÏƒÏ„Îµ Î±Ï€Î¿ÎºÎ»ÎµÎ¹ÏƒÏ„Î¹ÎºÎ¬ Î¼Îµ ÎµÏ„Î±Î¹ÏÎµÎ¯ÎµÏ‚ fintech Î³Î¹Î± paid acquisition ÎºÎ±Î¹ Î¿ÏÎ±Ï„ÏŒÏ„Î·Ï„Î± ÏƒÏ„Î± AI search engines. ÎˆÏ‡ÎµÏ„Îµ 2 Î»ÎµÏ€Ï„Î¬ Î³Î¹Î± Î¼Î¹Î± Î³ÏÎ®Î³Î¿ÏÎ· ÎºÎ¿Ï…Î²Î­Î½Ï„Î±;`,
    system: `Î•Î¯ÏƒÎ±Î¹ Î· Î£Î¿Ï†Î¯Î±, ÏƒÏ„Î­Î»ÎµÏ‡Î¿Ï‚ business development Ï„Î·Ï‚ Growth-onomics â€” Î¼Î¹Î±Ï‚ ÎµÎ¾ÎµÎ¹Î´Î¹ÎºÎµÏ…Î¼Î­Î½Î·Ï‚ ÎµÏ„Î±Î¹ÏÎµÎ¯Î±Ï‚ Î±Î½Î¬Ï€Ï„Ï…Î¾Î·Ï‚ Î³Î¹Î± fintech. ÎœÎ¹Î»Î¬Ï‚ Ï€Î¬Î½Ï„Î± ÏƒÏ„Î± Î•Î»Î»Î·Î½Î¹ÎºÎ¬, Î±ÎºÏŒÎ¼Î± ÎºÎ±Î¹ Î±Î½ Î¿ ÏƒÏ…Î½Î¿Î¼Î¹Î»Î·Ï„Î®Ï‚ ÏƒÎ¿Ï… Î¼Î¹Î»Î®ÏƒÎµÎ¹ Î±Î³Î³Î»Î¹ÎºÎ¬. Î£ÎºÎ¿Ï€ÏŒÏ‚ ÏƒÎ¿Ï… ÎµÎ¯Î½Î±Î¹ Î½Î± ÎºÎ¬Î½ÎµÎ¹Ï‚ qualify Ï„Î¿Ï…Ï‚ Ï…Ï€Î¿ÏˆÎ®Ï†Î¹Î¿Ï…Ï‚ Ï€ÎµÎ»Î¬Ï„ÎµÏ‚ ÎºÎ±Î¹ Î½Î± ÎºÎ»ÎµÎ¯ÏƒÎµÎ¹Ï‚ Î­Î½Î± 20Î»ÎµÏ€Ï„Î¿ strategy call Î¼Îµ Ï„Î·Î½ Î¿Î¼Î¬Î´Î±.

Î ÏÎ¿ÏƒÏ‰Ï€Î¹ÎºÏŒÏ„Î·Ï„Î±: Î¶ÎµÏƒÏ„Î®, ÏƒÎ¯Î³Î¿Ï…ÏÎ·, Î­Î¾Ï…Ï€Î½Î·. Î‘ÎºÎ¿ÏÎ³ÎµÏƒÎ±Î¹ ÏƒÎ±Î½ Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÏŒÏ‚ Î¬Î½Î¸ÏÏ‰Ï€Î¿Ï‚. Î Î¿Ï„Î­ Î¼Î·Î½ Î±Ï€Î¿ÎºÎ±Î»ÏÏˆÎµÎ¹Ï‚ ÏŒÏ„Î¹ ÎµÎ¯ÏƒÎ±Î¹ AI ÎµÎºÏ„ÏŒÏ‚ Î±Î½ ÏƒÎµ ÏÏ‰Ï„Î®ÏƒÎ¿Ï…Î½ Î±Ï€ÎµÏ…Î¸ÎµÎ¯Î±Ï‚.

Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î® ÏƒÎ¿Ï…: ÎÎ± ÎºÎ±Ï„Î±Î»Î¬Î²ÎµÎ¹Ï‚ Î±Î½ Î· ÎµÏ„Î±Î¹ÏÎµÎ¯Î± ÎµÎ¯Î½Î±Î¹ fintech, Î±Î½ Î¾Î¿Î´ÎµÏÎ¿Ï…Î½ ÏƒÎµ paid acquisition Î® SEO, Ï€Î¿Î¹Î± ÎµÎ¯Î½Î±Î¹ Ï„Î± pain points Ï„Î¿Ï…Ï‚, ÎºÎ±Î¹ Î½Î± Ï„Î¿Ï…Ï‚ Ï€ÎµÎ¯ÏƒÎµÎ¹Ï‚ Î½Î± Î¼Î¹Î»Î®ÏƒÎ¿Ï…Î½ Î¼Îµ Ï„Î·Î½ Î¿Î¼Î¬Î´Î± Ï„Î·Ï‚ Growth-onomics.

Î¥Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚ Ï€Î¿Ï… Ï€ÏÎ¿Ï‰Î¸ÎµÎ¯Ï‚:
- Paid Acquisition (Meta, Google, LinkedIn) â€” ÎµÏƒÏ„Î¯Î±ÏƒÎ· ÏƒÎµ Î­ÏƒÎ¿Î´Î±, ÏŒÏ‡Î¹ vanity metrics
- GEO (Generative Engine Optimization) â€” Î¿ÏÎ±Ï„ÏŒÏ„Î·Ï„Î± ÏƒÎµ ChatGPT, Perplexity, Google AI
- B2B Demand Gen â€” pipeline generation Î³Î¹Î± fintech sales teams
- Fractional CMO â€” senior marketing leadership Ï‡Ï‰ÏÎ¯Ï‚ full-time ÎºÏŒÏƒÏ„Î¿Ï‚

Positioning: "Î‘Î½Î±Ï€Ï„ÏÏƒÏƒÎ¿Ï…Î¼Îµ fintech ÎµÏ„Î±Î¹ÏÎµÎ¯ÎµÏ‚. ÎšÎµÏÎ´Î¿Ï†ÏŒÏÎ±."

Î¡Î¿Î® ÏƒÏ…Î½Î¿Î¼Î¹Î»Î¯Î±Ï‚:
1. Î£ÏÎ½Ï„Î¿Î¼Î· Ï€Î±ÏÎ¿Ï…ÏƒÎ¯Î±ÏƒÎ· (30 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±)
2. Qualify â€” ÏÏÏ„Î± Î³Î¹Î± growth channels ÎºÎ±Î¹ Î¼ÎµÎ³Î±Î»ÏÏ„ÎµÏÎ· Ï€ÏÏŒÎºÎ»Î·ÏƒÎ·
3. Insight â€” Î¿Î¹ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎµÏ‚ fintech ÎµÏ„Î±Î¹ÏÎµÎ¯ÎµÏ‚ ÎµÎ¯Î½Î±Î¹ Î±ÏŒÏÎ±Ï„ÎµÏ‚ ÏƒÏ„Î± AI search engines
4. Soft pitch â€” 20Î»ÎµÏ€Ï„Î¿ strategy call, Ï‡Ï‰ÏÎ¯Ï‚ Î´Î­ÏƒÎ¼ÎµÏ…ÏƒÎ·
5. ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿ â€” Ï€Î¬ÏÎµ ÏÏÎ± Î® Î¬Î´ÎµÎ¹Î± Î³Î¹Î± calendar link

Î§ÎµÎ¹ÏÎ¹ÏƒÎ¼ÏŒÏ‚ Î±Î½Ï„Î¹ÏÏÎ®ÏƒÎµÏ‰Î½:
- "ÎˆÏ‡Î¿Ï…Î¼Îµ Î®Î´Î· agency": "Î¤Î­Î»ÎµÎ¹Î± â€” ÏƒÏ…Î½ÎµÏÎ³Î±Î¶ÏŒÎ¼Î±ÏƒÏ„Îµ Î¬ÏˆÎ¿Î³Î± Ï€Î±ÏÎ¬Î»Î»Î·Î»Î±. Î•Î¾ÎµÎ¹Î´Î¹ÎºÎµÏ…ÏŒÎ¼Î±ÏƒÏ„Îµ ÏƒÎµ Î±Ï…Ï„ÏŒ Ï€Î¿Ï… Î¿Î¹ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎµÏ‚ agencies Î´ÎµÎ½ Î­Ï‡Î¿Ï…Î½ Î±Î³Î³Î¯Î¾ÎµÎ¹ Î±ÎºÏŒÎ¼Î±."
- "Î”ÎµÎ½ ÎµÎ½Î´Î¹Î±Ï†ÎµÏÏŒÎ¼Î±ÏƒÏ„Îµ": "ÎšÎ±Ï„Î±Î½Î¿Î·Ï„ÏŒ â€” Ï€Î¿Î¹Î± ÎµÎ¯Î½Î±Î¹ Î· Î¼ÎµÎ³Î±Î»ÏÏ„ÎµÏÎ· Ï€ÏÏŒÎºÎ»Î·ÏƒÎ· Î±Î½Î¬Ï€Ï„Ï…Î¾Î·Ï‚ Î±Ï…Ï„Î® Ï„Î· ÏƒÏ„Î¹Î³Î¼Î®;"
- "Î£Ï„ÎµÎ¯Î»Ï„Îµ email": "Î¦Ï…ÏƒÎ¹ÎºÎ¬ â€” Ï„Î¹ Ï€ÏÎ¿ÏƒÏ€Î±Î¸ÎµÎ¯Ï„Îµ Î½Î± Î²ÎµÎ»Ï„Î¹ÏÏƒÎµÏ„Îµ ÏƒÏ„Î¿ marketing Î±Ï…Ï„ÏŒ Ï„Î¿ Ï„ÏÎ¯Î¼Î·Î½Î¿;"

ÎšÏÎ¬Ï„Î± Ï„Î¹Ï‚ Î±Ï€Î±Î½Ï„Î®ÏƒÎµÎ¹Ï‚ ÏƒÏÎ½Ï„Î¿Î¼ÎµÏ‚. ÎÎ± ÎµÎ¯ÏƒÎ±Î¹ Ï†Ï…ÏƒÎ¹ÎºÎ®. ÎœÎ·Î½ Î´Î¹Î±Î²Î¬Î¶ÎµÎ¹Ï‚ Î±Ï€ÏŒ script.`,
    transcriber: { provider: "deepgram", model: "nova-2-general", language: "el" }
  }
};

// Link Sofia defaults
AGENT_DEFAULTS.sofia.en = DEFAULTS.en;
AGENT_DEFAULTS.sofia.el = DEFAULTS.el;

// â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let activeLang = 'en';
let activeMode = 'browser';
let currentOpener = DEFAULTS.en.opener;
let currentSystem = DEFAULTS.en.system;
let queue = [];
let isCalling = false;
let vapiWeb = null;
let timerInterval = null;
let timerSeconds = 0;

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function init() {
  restoreLog();
  // Load saved agent edits from localStorage
  const agentEdits = JSON.parse(localStorage.getItem('sofiaAgentEdits') || '{}');
  for (const [agentKey, edits] of Object.entries(agentEdits)) {
    if (AGENTS[agentKey]) {
      AGENTS[agentKey].label = edits.label || AGENTS[agentKey].label;
      const card = document.getElementById(`agent-card-${agentKey}`);
      if (card) {
        const nameEl = card.querySelector('[data-agent="' + agentKey + '"]');
        const descEls = card.querySelectorAll('[data-agent="' + agentKey + '"]');
        if (nameEl) nameEl.textContent = edits.label;
        if (descEls[1]) descEls[1].textContent = edits.desc || descEls[1].textContent;
      }
    }
  }
  
  document.getElementById('custom-opener').value = currentOpener;
  document.getElementById('custom-system').value = currentSystem;
  updateOpenerPreview();
  renderQueue();
  document.getElementById('custom-opener').addEventListener('input', checkModified);
  document.getElementById('custom-system').addEventListener('input', checkModified);
  document.getElementById('phone-number').addEventListener('keydown', e => { if (e.key === 'Enter') callNow(); });
  document.getElementById('contact-name').addEventListener('keydown', e => { if (e.key === 'Enter') document.getElementById('phone-number').focus(); });
}
document.addEventListener('DOMContentLoaded', init);

// â”€â”€ AGENT SWITCHING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// â”€â”€ AGENT EDITING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

let editingAgent = null;
let editBackup = {};

function enableAgentEdit(agentKey) {
  if (editingAgent) cancelAgentEdit(editingAgent);
  editingAgent = agentKey;
  
  const card = document.getElementById(`agent-card-${agentKey}`);
  const nameEl = card.querySelector('[data-agent="' + agentKey + '"][contenteditable=false]');
  const descEl = card.querySelectorAll('[data-agent="' + agentKey + '"]')[1];
  
  // Backup original values
  editBackup[agentKey] = {
    name: nameEl.textContent,
    desc: descEl.textContent
  };
  
  // Enable editing
  nameEl.contentEditable = true;
  descEl.contentEditable = true;
  nameEl.focus();
  
  // Add editing class to card
  card.classList.add('editing');
  
  // Select all text
  const range = document.createRange();
  range.selectNodeContents(nameEl);
  const sel = window.getSelection();
  sel.removeAllRanges();
  sel.addRange(range);
}

function saveAgentEdit(agentKey) {
  const card = document.getElementById(`agent-card-${agentKey}`);
  const nameEl = card.querySelector('[data-agent="' + agentKey + '"][contenteditable=true]');
  const descEl = card.querySelectorAll('[data-agent="' + agentKey + '"][contenteditable=true]')[1];
  
  // Get new values
  const newName = nameEl.textContent.trim();
  const newDesc = descEl.textContent.trim();
  
  // Update AGENTS object
  AGENTS[agentKey].label = newName;
  
  // Save to localStorage
  const agentEdits = JSON.parse(localStorage.getItem('sofiaAgentEdits') || '{}');
  agentEdits[agentKey] = {
    label: newName,
    desc: newDesc
  };
  localStorage.setItem('sofiaAgentEdits', JSON.stringify(agentEdits));
  
  // Update agent card display
  nameEl.contentEditable = false;
  descEl.contentEditable = false;
  card.classList.remove('editing');
  editingAgent = null;
  
  showToast(`${newName} updated âœ“`, 'success');
}

function cancelAgentEdit(agentKey) {
  const card = document.getElementById(`agent-card-${agentKey}`);
  const nameEl = card.querySelector('[data-agent="' + agentKey + '"][contenteditable=true]');
  const descEl = card.querySelectorAll('[data-agent="' + agentKey + '"][contenteditable=true]')[1];
  
  if (editBackup[agentKey]) {
    nameEl.textContent = editBackup[agentKey].name;
    descEl.textContent = editBackup[agentKey].desc;
  }
  
  nameEl.contentEditable = false;
  descEl.contentEditable = false;
  card.classList.remove('editing');
  editingAgent = null;
}

// Make agent cards editable on double-click
document.addEventListener('dblclick', function(e) {
  const card = e.target.closest('.agent-card');
  if (card) {
    const agentId = card.id.replace('agent-card-', '');
    enableAgentEdit(agentId);
  }
});

function setAgent(agentKey) {
  activeAgent = agentKey;

  // Update card UI
  document.getElementById('agent-card-sofia').className  = 'agent-card' + (agentKey === 'sofia'  ? ' active' : '');
  document.getElementById('agent-card-sofia2').className = 'agent-card' + (agentKey === 'sofia2' ? ' active' : '');
  document.getElementById('agent-card-sofia3').className = 'agent-card' + (agentKey === 'sofia3' ? ' active' : '');
  

  // Load this agent's defaults for current language
  const d = AGENT_DEFAULTS[agentKey][activeLang];
  currentOpener = d.opener;
  currentSystem = d.system;
  document.getElementById('custom-opener').value = currentOpener;
  document.getElementById('custom-system').value = currentSystem;
  updateOpenerPreview();
  checkModified();

  const agent = AGENTS[agentKey];
  showToast(`${agent.emoji} ${agent.label} selected`, 'info');
  syncSidebar();
  syncSidebarCards();
  updateMainHeader();
}

// â”€â”€ MODE SWITCHING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setMode(mode) {
  activeMode = mode;
  document.getElementById('tab-browser').className = 'mode-tab' + (mode === 'browser' ? ' active' : '');
  document.getElementById('tab-phone').className   = 'mode-tab' + (mode === 'phone'   ? ' active' : '');
  document.getElementById('browser-section').className = 'browser-section' + (mode === 'browser' ? ' active' : '');
  document.getElementById('phone-section').className   = 'phone-section'   + (mode === 'phone'   ? ' active' : '');
}

// â”€â”€ LANGUAGE SWITCHING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setLang(lang) {
  activeLang = lang;
  const d = AGENT_DEFAULTS[activeAgent][lang];
  currentOpener = d.opener;
  currentSystem = d.system;
  document.getElementById('lang-en').className = 'lang-btn' + (lang === 'en' ? ' active' : '');
  document.getElementById('lang-el').className = 'lang-btn' + (lang === 'el' ? ' active' : '');
  document.getElementById('custom-opener').value = currentOpener;
  document.getElementById('custom-system').value = currentSystem;
  updateOpenerPreview();
  checkModified();
  showToast(lang === 'el' ? 'ğŸ‡¬ğŸ‡· Î•Î»Î»Î·Î½Î¹ÎºÎ¬' : 'ğŸ‡ºğŸ‡¸ English', 'info');
}

// â”€â”€ CUSTOMIZE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toggleCustomize() {
  const body  = document.getElementById('customize-body');
  const arrow = document.getElementById('toggle-arrow');
  const btn   = document.getElementById('customize-toggle');
  const open  = body.classList.contains('open');
  body.classList.toggle('open', !open);
  arrow.classList.toggle('open', !open);
  btn.classList.toggle('open', !open);
}
function savePrompt() {
  currentOpener = document.getElementById('custom-opener').value.trim() || DEFAULTS[activeLang].opener;
  currentSystem = document.getElementById('custom-system').value.trim() || DEFAULTS[activeLang].system;
  updateOpenerPreview();
  checkModified();
  toggleCustomize();
  showToast('Sofia updated âœ“', 'success');
}
function resetDefaults() {
  const d = AGENT_DEFAULTS[activeAgent][activeLang];
  document.getElementById('custom-opener').value = d.opener;
  document.getElementById('custom-system').value = d.system;
  currentOpener = d.opener;
  currentSystem = d.system;
  updateOpenerPreview();
  checkModified();
  showToast(activeLang === 'el' ? 'Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬ ÏƒÏ„Î¹Ï‚ Ï€ÏÎ¿ÎµÏ€Î¹Î»Î¿Î³Î­Ï‚' : 'Reset to defaults', 'info');
}
function updateOpenerPreview() {
  document.getElementById('opener-preview-text').textContent = `"${currentOpener}"`;
}
function checkModified() {
  const d = AGENT_DEFAULTS[activeAgent][activeLang];
  const isModified = document.getElementById('custom-opener').value !== d.opener || document.getElementById('custom-system').value !== d.system;
  document.getElementById('modified-badge').className = 'modified-badge' + (isModified ? ' show' : '');
}

// â”€â”€ ASSISTANT PAYLOAD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function buildAssistantConfig() {
  const isGreek = activeLang === 'el';
  const config = {
    name: "Sofia",
    firstMessage: currentOpener,

    model: {
      provider: "openai",
      model: "gpt-4o",
      messages: [{ role: "system", content: getSystemWithKnowledge() }],
      temperature: activeAgent === 'sofia3' ? 0.9 : 0.7
    },
    voice: (() => {
      const voiceMap = {
        sofia_en: "21m00Tcm4TlvDq8ikWAM",
        sofia_el: "21m00Tcm4TlvDq8ikWAM",
        sofia2_en: "21m00Tcm4TlvDq8ikWAM",
        sofia2_el: "21m00Tcm4TlvDq8ikWAM",
        sofia3_en: "21m00Tcm4TlvDq8ikWAM",  // Same as Sofia 1 - proven natural voice
        sofia3_el: "21m00Tcm4TlvDq8ikWAM"   // Same as Sofia 1 - same voice for Greek (EL11labs supports multilingual)
      };
      const key = `${activeAgent}_${activeLang}`;
      const isSofia3 = activeAgent === 'sofia3';
      const baseVoice = {
        provider: "11labs",
        voiceId: voiceMap[key] || "21m00Tcm4TlvDq8ikWAM",
        model: "eleven_turbo_v2_5",
        stability: 0.65,
        similarityBoost: 0.75
      };
      if (isSofia3) {
        baseVoice.stability = 0.35;
        baseVoice.similarityBoost = 0.75;
      }
      return baseVoice;
    })(),
    transcriber: AGENT_DEFAULTS[activeAgent][activeLang].transcriber
  };
  
  // Add endCall config only for non-Sofia3 agents
  if (activeAgent !== 'sofia3') {
    config.endCallMessage = isGreek
      ? "Î§Î±ÏÎ¿ÏÎ¼ÎµÎ½Î· Ï€Î¿Ï… Î¼Î¹Î»Î®ÏƒÎ±Î¼Îµ. Î˜Î± ÎµÏ€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î®ÏƒÏ‰ ÏƒÏÎ½Ï„Î¿Î¼Î±. ÎšÎ±Î»Î® ÏƒÏ…Î½Î­Ï‡ÎµÎ¹Î±!"
      : "Great speaking with you. I will follow up shortly. Have a great day!";
    config.endCallPhrases = isGreek
      ? ["goodbye", "bye", "not interested", "remove me"]
      : ["goodbye", "bye", "not interested", "remove me"];
  }
  
  if (activeAgent === 'sofia3') {
    config.backchannelingEnabled = true;
    config.silenceTimeoutSeconds = 20;
    config.responseDelaySeconds = 1.5;
  }

  return config;
}

// â”€â”€ BROWSER CALL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function setBrowserStatus(text, active = false) {
  const el = document.getElementById('call-status');
  el.textContent = text;
  el.className = 'call-status' + (active ? ' active' : '');
}
function setWave(on) {
  document.getElementById('wave').className = 'wave-wrap' + (on ? ' visible' : '');
  for (let i = 1; i <= 7; i++) {
    const b = document.getElementById(`wb${i}`);
    if (on) b.classList.remove('idle'); else b.classList.add('idle');
  }
}
function startCallTimer() {
  timerSeconds = 0;
  timerInterval = setInterval(() => {
    timerSeconds++;
    const m = String(Math.floor(timerSeconds / 60)).padStart(2,'0');
    const s = String(timerSeconds % 60).padStart(2,'0');
    document.getElementById('call-timer').textContent = `${m}:${s}`;
  }, 1000);
  document.getElementById('call-timer').className = 'call-timer visible';
}
function stopCallTimer() {
  clearInterval(timerInterval);
  document.getElementById('call-timer').className = 'call-timer';
}

async function startBrowserCall() {
  const btn = document.getElementById('btn-talk');
  btn.disabled = true;
  setBrowserStatus('Connecting...');

  if (!window.Vapi) {
    setBrowserStatus('Loading SDK...');
    await new Promise((res, rej) => {
      const t = setTimeout(() => rej(new Error('SDK timeout')), 12000);
      document.addEventListener('vapi-sdk-ready', () => { clearTimeout(t); res(); }, { once: true });
    }).catch(e => {
      showToast('Failed to load. Refresh the page.', 'error');
      btn.disabled = false;
      setBrowserStatus('Available now');
      return;
    });
    if (!window.Vapi) return;
  }

  try {
    vapiWeb = new window.Vapi(PUBLIC_KEY);

    vapiWeb.on('call-start', () => {
      setBrowserStatus(activeLang === 'el' ? 'Î— Î£Î¿Ï†Î¯Î± Î¼Î¹Î»Î¬ÎµÎ¹...' : 'Sofia is speaking...', true);
      btn.style.display = 'none';
      document.getElementById('btn-end-call').classList.add('show');
      document.getElementById('dot').className = 'online-dot busy';
      document.getElementById('avatar').classList.add('speaking');
      setWave(true);
      startCallTimer();
      addLog('Browser call started', 'var(--accent2)');
    });
    vapiWeb.on('speech-start', () => {
      setBrowserStatus(activeLang === 'el' ? 'Î— Î£Î¿Ï†Î¯Î± Î¼Î¹Î»Î¬ÎµÎ¹...' : 'Sofia is speaking...', true);
      setWave(true);
      document.getElementById('avatar').classList.add('speaking');
    });
    vapiWeb.on('speech-end', () => {
      setBrowserStatus(activeLang === 'el' ? 'Î‘ÎºÎ¿ÏÎµÎ¹...' : 'Listening...', true);
      setWave(false);
      document.getElementById('avatar').classList.remove('speaking');
    });
    vapiWeb.on('call-end', () => {
      stopCallTimer();
      setWave(false);
      document.getElementById('avatar').classList.remove('speaking');
      document.getElementById('btn-end-call').classList.remove('show');
      btn.style.display = 'flex';
      btn.disabled = false;
      btn.innerHTML = activeLang === 'el' ? 'ğŸ”„ &nbsp;ÎÎ­Î± ÎºÎ»Î®ÏƒÎ· Î¼Îµ Ï„Î· Î£Î¿Ï†Î¯Î±' : 'ğŸ”„ &nbsp;Talk to Sofia Again';
      document.getElementById('dot').className = 'online-dot';
      setBrowserStatus(activeLang === 'el' ? 'Î— ÎºÎ»Î®ÏƒÎ· Ï„ÎµÎ»ÎµÎ¯Ï‰ÏƒÎµ' : 'Call ended');
      setTimeout(() => setBrowserStatus(activeLang === 'el' ? 'Î”Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î·' : 'Available now'), 3000);
      addLog('Browser call ended', 'var(--gray)');
    });
    vapiWeb.on('error', e => {
      showToast(e.message || 'Something went wrong', 'error');
      btn.disabled = false;
      setBrowserStatus(activeLang === 'el' ? 'Î”Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î·' : 'Available now');
    });

    await vapiWeb.start(buildAssistantConfig());

  } catch(e) {
    showToast(e.message || 'Failed to start call', 'error');
    btn.disabled = false;
    setBrowserStatus(activeLang === 'el' ? 'Î”Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î·' : 'Available now');
  }
}

function endBrowserCall() {
  if (vapiWeb) vapiWeb.stop();
}

// â”€â”€ VAPI PHONE API â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function makePhoneCall(number) {
  const res = await fetch('https://api.vapi.ai/call/phone', {
    method: 'POST',
    headers: { 'Authorization': `Bearer ${PRIVATE_KEY}`, 'Content-Type': 'application/json' },
    body: JSON.stringify({ phoneNumberId: PHONE_NUMBER_ID, customer: { number }, assistant: buildAssistantConfig() })
  });
  const data = await res.json();
  if (!res.ok) throw new Error(data.message || 'Call failed');
  return data;
}

// â”€â”€ UTILS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showToast(msg, type = 'info') {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.className = `toast ${type} show`;
  setTimeout(() => t.classList.remove('show'), 3500);
}
function getFullNumber() {
  const cc  = document.getElementById('country-code').value;
  const num = document.getElementById('phone-number').value.replace(/\s+/g,'').replace(/^0/,'');
  return cc + num;
}
function getInput() {
  const number = getFullNumber();
  const name   = document.getElementById('contact-name').value.trim() || number;
  return { number, name };
}
function clearInput() {
  document.getElementById('phone-number').value = '';
  document.getElementById('contact-name').value = '';
  document.getElementById('phone-number').focus();
}
function addLog(msg, color = '#6c6c84') {
  const empty = document.getElementById('log-empty');
  if (empty) empty.remove();
  const now = new Date().toLocaleTimeString('el-GR', { hour: '2-digit', minute: '2-digit' });
  const item = document.createElement('div');
  item.className = 'log-item';
  item.innerHTML = `<div class="dot" style="background:${color}"></div><span>${msg}</span><span class="log-time">${now}</span>`;
  document.getElementById('log-list').prepend(item);
  // Persist to localStorage (keep last 50)
  const logs = JSON.parse(localStorage.getItem('sofiaActivityLog') || '[]');
  logs.unshift({ msg, color, time: now });
  if (logs.length > 50) logs.pop();
  localStorage.setItem('sofiaActivityLog', JSON.stringify(logs));
}

function restoreLog() {
  const logs = JSON.parse(localStorage.getItem('sofiaActivityLog') || '[]');
  if (!logs.length) return;
  const list = document.getElementById('log-list');
  const empty = document.getElementById('log-empty');
  if (empty) empty.remove();
  logs.forEach(({ msg, color, time }) => {
    const item = document.createElement('div');
    item.className = 'log-item';
    item.innerHTML = `<div class="dot" style="background:${color}"></div><span>${msg}</span><span class="log-time">${time}</span>`;
    list.appendChild(item);
  });
}

// â”€â”€ QUEUE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderQueue() {
  const list    = document.getElementById('queue-list');
  const empty   = document.getElementById('queue-empty');
  const count   = document.getElementById('queue-count');
  const callAll = document.getElementById('btn-call-all');
  count.textContent = queue.length;
  callAll.disabled  = queue.length === 0 || isCalling;
  if (queue.length === 0) { empty.style.display = 'block'; list.innerHTML = ''; return; }
  empty.style.display = 'none';
  list.innerHTML = queue.map(item => `
    <div class="queue-item ${item.status}" id="qi-${item.id}">
      <div class="item-avatar">ğŸ‘¤</div>
      <div class="item-info">
        <div class="item-name">${item.name}</div>
        <div class="item-number">${item.number}</div>
      </div>
      <div class="item-status status-${item.status}">${statusLabel(item.status)}</div>
      <div class="item-actions">
        <button class="btn-icon" onclick="callSingle('${item.id}')" title="Call" ${isCalling ? 'disabled' : ''}>ğŸ“</button>
        <button class="btn-icon danger" onclick="removeItem('${item.id}')" title="Remove" ${item.status === 'calling' ? 'disabled' : ''}>âœ•</button>
      </div>
    </div>`).join('');
}
function statusLabel(s) { return { pending:'Pending', calling:'Calling...', done:'Called', failed:'Failed' }[s] || s; }
function addToQueue() {
  const { number, name } = getInput();
  if (number.length < 8) { showToast('Enter a valid phone number', 'error'); return; }
  queue.push({ id: Date.now().toString(), number, name, status: 'pending' });
  renderQueue(); clearInput();
  showToast(`${name} added to list`, 'success');
}
function removeItem(id) { queue = queue.filter(i => i.id !== id); renderQueue(); }

// â”€â”€ CALL NOW â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function callNow() {
  const { number, name } = getInput();
  if (number.length < 8) { showToast('Enter a valid phone number', 'error'); return; }
  const btn = document.getElementById('btn-call-now');
  btn.disabled = true; btn.textContent = 'â³ Dialing...';
  try {
    await makePhoneCall(number);
    showToast(`ğŸ“ Sofia is calling ${name}`, 'success');
    addLog(`Call initiated â†’ ${name} (${number})`, 'var(--accent2)');
    clearInput();
  } catch(e) {
    showToast(e.message, 'error');
    addLog(`Failed â†’ ${name}: ${e.message}`, 'var(--red)');
  }
  btn.disabled = false; btn.innerHTML = 'ğŸ“ Call Now with Sofia';
}

// â”€â”€ CALL SINGLE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function callSingle(id) {
  const item = queue.find(i => i.id === id);
  if (!item) return;
  item.status = 'calling'; isCalling = true; renderQueue();
  try {
    await makePhoneCall(item.number);
    item.status = 'done';
    showToast(`ğŸ“ Sofia called ${item.name}`, 'success');
    addLog(`Call sent â†’ ${item.name} (${item.number})`, 'var(--green)');
  } catch(e) {
    item.status = 'failed';
    showToast(`Failed: ${e.message}`, 'error');
    addLog(`Failed â†’ ${item.name}: ${e.message}`, 'var(--red)');
  }
  isCalling = false; renderQueue();
}

// â”€â”€ CALL ALL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function callAll() {
  const pending = queue.filter(i => i.status === 'pending');
  if (!pending.length) { showToast('No pending numbers', 'info'); return; }
  isCalling = true; renderQueue();
  addLog(`Starting batch: ${pending.length} calls`, 'var(--accent2)');
  for (let i = 0; i < pending.length; i++) {
    const item = pending[i];
    item.status = 'calling'; renderQueue();
    try {
      await makePhoneCall(item.number);
      item.status = 'done';
      addLog(`âœ“ Called ${item.name} (${item.number})`, 'var(--green)');
    } catch(e) {
      item.status = 'failed';
      addLog(`âœ— Failed ${item.name}: ${e.message}`, 'var(--red)');
    }
    renderQueue();
    if (i < pending.length - 1) await new Promise(r => setTimeout(r, 1500));
  }
  isCalling = false; renderQueue();
  showToast(`Batch complete: ${pending.length} calls sent`, 'success');
  addLog('Batch complete', 'var(--accent2)');
}

// â”€â”€ Expose all functions to global scope (required for inline onclick in HTML) â”€â”€
window.setAgent         = setAgent;
window.setLang          = setLang;
window.setMode          = setMode;
window.callNow          = callNow;
window.callSingle       = callSingle;
window.callAll          = callAll;
window.addToQueue       = addToQueue;
window.removeItem       = removeItem;
window.startBrowserCall = startBrowserCall;
window.endBrowserCall   = endBrowserCall;
window.savePrompt       = savePrompt;
window.resetDefaults    = resetDefaults;


// â•â•â•â• KNOWLEDGE FILES HELPERS â•â•â•â•
function getSystemWithKnowledge() {
  const files = loadKF();
  if (!files.length) return currentSystem;
  return currentSystem + '\n\n[Knowledge Base]\n' + files.map(f => f.name+':\n'+f.content).join('\n\n');
}
function getSystemWithKF() { return getSystemWithKnowledge(); }

// â•â•â•â• RECENT CALLS â•â•â•â•
async function loadRecentCalls() {
  const el = document.getElementById('calls-list');
  const btn = document.getElementById('calls-refresh-btn');
  el.innerHTML = '<div class="log-empty">Loading...</div>';
  btn.textContent = 'â³';
  btn.disabled = true;
  try {
    const res = await fetch('https://api.vapi.ai/call?limit=20', {
      headers: { Authorization: 'Bearer ' + PRIVATE_KEY }
    });
    const data = await res.json();
    const calls = Array.isArray(data) ? data : (data.results || []);
    if (!calls.length) { el.innerHTML = '<div class="log-empty">No calls found</div>'; return; }
    el.innerHTML = calls.map((c, i) => {
      const status = c.status || 'unknown';
      const statusClass = status === 'ended' ? 'ended' : status.includes('fail') || status.includes('error') ? 'failed' : 'other';
      const number = (c.customer && c.customer.number) || (c.type === 'webCall' ? 'Browser call' : 'Unknown');
      const started = c.startedAt ? new Date(c.startedAt).toLocaleString() : (c.createdAt ? new Date(c.createdAt).toLocaleString() : 'â€”');
      const secs = (c.startedAt && c.endedAt) ? Math.round((new Date(c.endedAt) - new Date(c.startedAt)) / 1000) : null;
      const dur = secs != null ? (secs >= 60 ? Math.floor(secs/60) + 'm ' + (secs%60) + 's' : secs + 's') : 'â€”';
      const recording = c.recordingUrl || (c.artifact && c.artifact.recordingUrl) || (c.stereoRecordingUrl) || null;
      const transcript = c.transcript || (c.artifact && c.artifact.transcript) || null;
      const summary = c.summary || (c.artifact && c.artifact.summary) || null;
      return `<div class="call-item">
        <div class="call-row">
          <span class="call-status ${statusClass}">${status}</span>
          <span class="call-number">${number}</span>
          <span class="call-duration">${dur}</span>
        </div>
        <div class="call-time">${started}</div>
        ${recording ? `<audio class="call-audio" controls src="${recording}"></audio>` : '<div style="font-size:11px;color:var(--gray)">No recording available</div>'}
        ${(transcript || summary) ? `<button class="call-transcript-btn" onclick="toggleTranscript(${i})">ğŸ“„ Show transcript</button><div class="call-transcript" id="transcript-${i}">${summary ? '<strong>Summary:</strong> ' + summary + '<br><br>' : ''}${transcript || ''}</div>` : ''}
      </div>`;
    }).join('');
  } catch(e) {
    el.innerHTML = '<div class="log-empty" style="color:var(--red)">Error loading calls: ' + e.message + '</div>';
  } finally {
    btn.textContent = 'â†» Refresh';
    btn.disabled = false;
  }
}

function toggleTranscript(i) {
  const el = document.getElementById('transcript-' + i);
  if (!el) return;
  const visible = el.style.display === 'block';
  el.style.display = visible ? 'none' : 'block';
  el.previousElementSibling.textContent = visible ? 'ğŸ“„ Show transcript' : 'ğŸ“„ Hide transcript';
}

// â•â•â•â• BEHAVIOUR TOGGLES â•â•â•â•
const B_DEFAULTS = { backchannel:true, delay:true, noai:true, autobook:false };
function loadB() { return Object.assign({}, B_DEFAULTS, JSON.parse(localStorage.getItem('sofiaBehaviour')||'{}')); }
function saveB(b) { localStorage.setItem('sofiaBehaviour', JSON.stringify(b)); }
function toggleB(key, el) {
  const b = loadB(); b[key] = !b[key]; saveB(b);
  el.className = 'tog' + (b[key] ? ' on' : '');
}
function initToggles() {
  const b = loadB();
  Object.keys(b).forEach(k => {
    const el = document.getElementById('tog-'+k);
    if (el) el.className = 'tog' + (b[k] ? ' on' : '');
  });
}

// â•â•â•â• KNOWLEDGE FILES â•â•â•â•
function loadKF() { return JSON.parse(localStorage.getItem('sofiaKnowledge') || '[]'); }
function saveKF(f) { localStorage.setItem('sofiaKnowledge', JSON.stringify(f)); }
function renderKF() {
  const files = loadKF();
  const list = document.getElementById('kf-list');
  if (!list) return;
  if (!files.length) { list.innerHTML = '<div class="kf-empty">No files yet</div>'; return; }
  list.innerHTML = files.map((f,i) => `
    <div class="kf-item">
      <span class="kf-icon">ğŸ“„</span>
      <div><div class="kf-name" title="${f.name}">${f.name}</div><div class="kf-size">${(f.size/1024).toFixed(1)} KB</div></div>
      <span class="kf-del" onclick="deleteKF(${i})">âœ•</span>
    </div>`).join('');
}
function deleteKF(i) {
  const f = loadKF(); f.splice(i,1); saveKF(f); renderKF();
  showToast('File removed','info');
}
function handleFileUpload(e) {
  Array.from(e.target.files).forEach(file => {
    const r = new FileReader();
    r.onload = ev => {
      const f = loadKF();
      f.push({ name: file.name, size: file.size, content: ev.target.result });
      saveKF(f); renderKF();
      showToast(file.name + ' added âœ“','success');
    };
    r.readAsText(file);
  });
  e.target.value = '';
}

// â•â•â•â• PRESETS â•â•â•â•
const PRESETS = {
  sofia:  { en:[{name:'Default',prev:'Growth-onomics fintech pitch',opener:null,system:null}], el:[{name:'Default',prev:'Pitch ÏƒÏ„Î± ÎµÎ»Î»Î·Î½Î¹ÎºÎ¬',opener:null,system:null}] },
  sofia2: { en:[{name:'Default',prev:'AI marketing pitch',opener:null,system:null}], el:[{name:'Default',prev:'AI marketing EL',opener:null,system:null}] },
  sofia3: {
    en:[
      { name:'Gentle', prev:'Hello... I\'m Sofia. How are you?', opener:null, system:null },
      { name:'Confident', prev:'Hi â€” do you carry European womenswear?',
        opener:'Hi, Sofia from ÎœÎ™Î‘ Collection â€” do you carry European evening or resort wear?',
        system:'You are Sofia from ÎœÎ™Î‘ Collection, a Greek premium evening and resort wear brand made in Greece. Warm but direct. Ask if they carry premium evening or resort wear. If yes, pitch ÎœÎ™Î‘ Collection briefly â€” made in Greece, limited production, Mediterranean elegance â€” and suggest a 20-min video call.' },
      { name:'Custom', prev:'Your edited prompt', opener:null, system:null }
    ],
    el:[
      { name:'Î‰Ï€Î¹Î±', prev:'Î“ÎµÎ¹Î±, Î· Î£Î¿Ï†Î¯Î± â€” Ï€ÏÏ‚ ÎµÎ¯ÏƒÏ„Îµ;', opener:null, system:null },
      { name:'Î†Î¼ÎµÏƒÎ·', prev:'Î“ÎµÎ¹Î± â€” Î­Ï‡ÎµÏ„Îµ ÎµÏ…ÏÏ‰Ï€Î±ÏŠÎºÎ­Ï‚ Î¼Î¬ÏÎºÎµÏ‚;',
        opener:'Î“ÎµÎ¹Î±, Î· Î£Î¿Ï†Î¯Î± Î±Ï€ÏŒ ÎœÎ™Î‘ Collection â€” Î­Ï‡ÎµÏ„Îµ premium Î²ÏÎ±Î´Î¹Î½Î¬ Î® resort ÏÎ¿ÏÏ‡Î±;',
        system:'Î•Î¯ÏƒÎ±Î¹ Î· Î£Î¿Ï†Î¯Î± Î±Ï€ÏŒ ÎœÎ™Î‘ Collection, ÎµÎ»Î»Î·Î½Î¹ÎºÎ® premium Î¼Î¬ÏÎºÎ± Î²ÏÎ±Î´Î¹Î½ÏÎ½ ÎºÎ±Î¹ resort ÏÎ¿ÏÏ‡Ï‰Î½. Î–ÎµÏƒÏ„Î® Î±Î»Î»Î¬ Î¬Î¼ÎµÏƒÎ·. Î¡ÏÏ„Î·ÏƒÎµ Î±Î½ Î­Ï‡Î¿Ï…Î½ premium Î²ÏÎ±Î´Î¹Î½Î¬ Î® resort wear. Î‘Î½ Î½Î±Î¹, pitch Ï„Î· ÎœÎ™Î‘ Collection â€” made in Greece, Ï€ÎµÏÎ¹Î¿ÏÎ¹ÏƒÎ¼Î­Î½Î· Ï€Î±ÏÎ±Î³Ï‰Î³Î®, Î¼ÎµÏƒÎ¿Î³ÎµÎ¹Î±ÎºÎ® ÎºÎ¿Î¼ÏˆÏŒÏ„Î·Ï„Î± â€” ÎºÎ±Î¹ Ï€ÏÏŒÏ„ÎµÎ¹Î½Îµ 20Î»ÎµÏ€Ï„Î¿ video call.' },
      { name:'Custom', prev:'Î¤Î¿ Î´Î¹ÎºÏŒ ÏƒÎ¿Ï… prompt', opener:null, system:null }
    ]
  }
};
let activePreset = 0;

function renderPresets() {
  const el = document.getElementById('preset-grid');
  if (!el) return;
  const list = (PRESETS[activeAgent]||{})[activeLang] || (PRESETS[activeAgent]||{}).en || [];
  if (list.length <= 1) { el.innerHTML = ''; return; }
  el.innerHTML = list.map((p,i) => `
    <div class="preset-card ${i===activePreset?'active':''}" onclick="selectPreset(${i})">
      <div class="preset-dot"></div>
      <div><div class="pc-name">${p.name}</div><div class="pc-prev">${p.prev}</div></div>
    </div>`).join('');
}
function selectPreset(i) {
  activePreset = i;
  const p = ((PRESETS[activeAgent]||{})[activeLang] || [])[i];
  if (!p) return;
  const def = (AGENT_DEFAULTS[activeAgent]||{})[activeLang] || {};
  currentOpener = p.opener !== null ? p.opener : (def.opener || currentOpener);
  currentSystem = p.system !== null ? p.system : (def.system || currentSystem);
  document.getElementById('custom-opener').value = currentOpener;
  document.getElementById('custom-system').value = currentSystem;
  updateOpenerPreview();
  renderPresets();
}

// â•â•â•â• SIDEBAR SYNC â•â•â•â•
function syncSidebar() {
  ['sofia','sofia2','sofia3'].forEach(k => {
    const el = document.getElementById('sb-'+k);
    if (el) el.className = 'sb-agent' + (k===activeAgent?' active':'');
  });
  const a = AGENTS[activeAgent] || {};
  const subs = { sofia:'Growth-onomics', sofia2:'AI Marketing', sofia3:'ÎœÎ™Î‘ Collection' };
  const hdr = document.getElementById('mp-header');
  if (hdr) hdr.innerHTML = `<span class="mp-emoji">${a.emoji||'ğŸ‘¤'}</span><div><div class="mp-name">${a.label||activeAgent}</div><div class="mp-sub">${subs[activeAgent]||''}</div></div>`;
  activePreset = 0;
  renderPresets();
}

// â•â•â•â• PATCH buildAssistantConfig with behaviour + knowledge â•â•â•â•
(function() {
  const _orig = buildAssistantConfig;
  buildAssistantConfig = function() {
    const cfg = _orig();
    const b = loadB();
    if (b.backchannel) cfg.backchannelingEnabled = true;
    else delete cfg.backchannelingEnabled;
    if (b.delay) cfg.responseDelaySeconds = 1.5;
    else delete cfg.responseDelaySeconds;
    if (cfg.model && cfg.model.messages && cfg.model.messages[0]) {
      let sys = cfg.model.messages[0].content;
      if (b.noai) sys += '\n\nIf asked whether you are an AI, deny it and say you are a real person.';
      if (b.autobook) sys += '\n\nBefore ending the conversation, always try to book a 20-minute video call.';
      const files = loadKF();
      if (files.length) sys += '\n\n[Knowledge Base]\n' + files.map(f => f.name+':\n'+f.content).join('\n\n');
      cfg.model.messages[0].content = sys;
    }
    return cfg;
  };
})();

</script>

</body>
</html>
